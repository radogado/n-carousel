{"version":3,"file":"n-carousel.min.js","names":["e","t","length","n","r","Array","Symbol","iterator","call","next","bind","isArray","Object","prototype","toString","slice","constructor","name","from","test","o","done","value","TypeError","window","apply","arguments","this","unshift","s","l","get","c","scrollListener","clearTimeout","setTimeout","a","size","dispatchEvent","i","listeners","set","delete","Event","Set","document","addEventListener","changedTouches","add","identifier","passive","WeakMap","Element","ceilingWidth","el","Math","ceil","parseFloat","getComputedStyle","width","ceilingHeight","height","focusableElements","isSafari","navigator","userAgent","match","isEndless","children","parentElement","classList","contains","isFullScreen","webkitFullscreenElement","fullscreenElement","isModal","closest","isVertical","matches","isAutoHeight","indexControls","index","controls_by_class","querySelectorAll","scrollEndAction","carousel","target","carouselStyle","abs","round","scrollTop","offsetHeight","paddingBlockStart","paddingBlockEnd","scrollLeft","offsetWidth","paddingInlineStart","paddingInlineEnd","slide","parentNode","sliding","dataset","parseInt","indexOf","observersOff","new_height","old_height","offset_y","lastScrollX","lastScrollY","scroll_offset","style","computed_max_height","maxHeight","max_height","min","nextSlideHeight","scrollTo","requestAnimationFrame","scrollAnimate","then","updateCarousel","overflow","scrollHeight","getIndex","y","x","getIndexReal","active_slide","querySelector","hash_slide","location","hash","hash_slide_index","scrolledAncestor","isRTL","direction","toggleFullScreen","restoreScroll","nuiAncestors","forEach","nuiScrollX","nuiScrollY","removeEventListener","togglingFullScreen","exitFullscreen","webkitExitFullscreen","display","updateExitFullScreen","slideTo","arr","push","scrolledAncestors","requestFullscreen","webkitRequestFullscreen","scrollStartX","getScroll","scrollX","scrollY","firstFocusableElement","focusableContent","lastFocusableElement","focusHandler","key","keyCode","shiftKey","activeElement","focus","preventDefault","trapFocus","modal","off","getControl","control","detached_control","id","closestCarousel","related_by_id","for","getElementById","distanceX","distanceY","Promise","resolve","wrapper","nextSlideInstant","ready","matchMedia","scroll_changing","setProperty","startx","starty","starth","distanceH","duration","start","draw","now","val","cos","PI","inOutSine","timeStamp","forced","saved_x","saved_y","firstElementChild","active_index","old_active_slide","observersOn","removeAttribute","setAttribute","active_index_real","restoreDisplacedSlides","el2","append","first","prepend","lastElementChild","last","activeSlide","max","updateScroll","scroll_x","scroll_y","paddingY","visibility","previously_active","nCarouselNav","inert","current","offsetX","offsetY","nCarouselTimeout","old_scroll_left","old_scroll_top","paddingX","top","left","behavior","slideNext","slidePrevious","new_offset","carouselKeys","includes","slidePreviousEvent","slideNextEvent","slideIndexEvent","href","ctrlKey","metaKey","new_index","old_index","openModal","body","frozen","closeModalOnBodyClick","overlay","closeModal","toggleModal","remove","autoHeightObserver","ResizeObserver","entries","removeProperty","updateSubpixels","padding","getBoundingClientRect","offset","height_minus_index","observe","unobserve","subpixel_observer","mutation_observer","attributes","attributeFilter","observerStarted","updateObserver","doUpdate","current_height","getPropertyValue","MutationObserver","mutations","mutation","setIndexWidth","position","init","host","previous","close_modal","full_screen","content","onclick","xx","yy","fullScreenEvent","onwebkitfullscreenchange","onfullscreenchange","hashed_slide","auto_delay","interval","carouselTimeout","rect","bottom","innerHeight","documentElement","right","innerWidth","isElementInViewport","platform","nCarouselUpdate","loaded","img","complete","nCarouselInit","modal_carousel","doInit","nui","registerComponent","readyState"],"sources":["n-carousel.rollup.js"],"mappings":"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","sourcesContent":["function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,n){var r=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(r)return (r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,n){if(t){if(\"string\"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return \"Object\"===r&&t.constructor&&(r=t.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&\"number\"==typeof t.length){r&&(t=r);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}if(!(\"onscrollend\"in window)){var n=function(e,t,n){var r=e[t];e[t]=function(){var e=Array.prototype.slice.apply(arguments,[0]);r.apply(this,e),e.unshift(r),n.apply(this,e);};},r=function(e,t,n,r){if(\"scroll\"==t||\"scrollend\"==t){var o=this,s=l.get(o);if(void 0===s){var c=0;s={scrollListener:function(e){clearTimeout(c),c=setTimeout(function(){a.size?setTimeout(s.scrollListener,100):(o.dispatchEvent(i),c=0);},100);},listeners:0},e.apply(o,[\"scroll\",s.scrollListener]),l.set(o,s);}s.listeners++;}},o=function(e,t,n){if(\"scroll\"==t||\"scrollend\"==t){var r=this,o=l.get(r);void 0!==o&&(o[t]--,--o.listeners>0||(e.apply(r,[\"scroll\",o.scrollListener]),l.delete(r)));}},i=new Event(\"scrollend\"),a=new Set;document.addEventListener(\"touchstart\",function(e){for(var n,r=t(e.changedTouches);!(n=r()).done;)a.add(n.value.identifier);},{passive:!0}),document.addEventListener(\"touchend\",function(e){for(var n,r=t(e.changedTouches);!(n=r()).done;)a.delete(n.value.identifier);},{passive:!0});var l=new WeakMap;n(Element.prototype,\"addEventListener\",r),n(window,\"addEventListener\",r),n(document,\"addEventListener\",r),n(Element.prototype,\"removeEventListener\",o),n(window,\"removeEventListener\",o),n(document,\"removeEventListener\",o);}\n\n(function() {\n  const ceilingWidth = el => Math.ceil(parseFloat(getComputedStyle(el).width));\n  const ceilingHeight = el => Math.ceil(parseFloat(getComputedStyle(el).height));\n  const focusableElements = 'button, [href], input, select, textarea, details, summary, video, [tabindex]:not([tabindex=\"-1\"])';\n  function isElementInViewport(el) {\n    let rect = el.getBoundingClientRect();\n    return (rect.top >= 0 && rect.left >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.offsetHeight) /* or $(window).height() */ && rect.right <= (window.innerWidth || document.documentElement.offsetWidth) /* or $(window).width() */ );\n  }\n  const default_duration = 500;\n  const default_interval = 4000;\n  const SCROLL_END_TIMEOUT = 10;\n  const MAX_HEIGHT_FALLBACK = 99999;\n  const isSafari = navigator.userAgent.match(/Safari/) && !navigator.userAgent.match(\"Chrome\");\n  const isEndless = el => el.children.length > 2 && el.parentElement.classList.contains(\"n-carousel--endless\");\n  const isFullScreen = () => { return !!(document.webkitFullscreenElement || document.fullscreenElement) };\n  const isModal = el => { return el.closest(\".n-carousel\").classList.contains('n-carousel--overlay') };\n  const isVertical = el => el.closest(\".n-carousel\").matches(\".n-carousel--vertical\");\n  const isAutoHeight = el => el.closest(\".n-carousel\").matches(\".n-carousel--auto-height\");\n  const indexControls = index => {\n    let controls_by_class = index.querySelectorAll('.n-carousel__control');\n    return (controls_by_class.length > 0) ? controls_by_class : index.querySelectorAll('a, button');\n  };\n  const scrollEndAction = carousel => {\n    carousel = carousel.target || carousel;\n    const carouselStyle = getComputedStyle(carousel);\n    let index = Math.abs(Math.round(\n      (isVertical(carousel) ? carousel.scrollTop / (carousel.offsetHeight - parseFloat(carouselStyle.paddingBlockStart) - parseFloat(carouselStyle.paddingBlockEnd)) : carousel.scrollLeft / (carousel.offsetWidth - parseFloat(carouselStyle.paddingInlineStart) - parseFloat(carouselStyle.paddingInlineEnd))), 2));\n    let slide = carousel.children[index];\n    if (!!carousel.parentNode.sliding || (carousel.dataset.next && parseInt(carousel.dataset.next) !== Array.prototype.indexOf.call(carousel.children, slide))) {\n      return;\n    }\n    carousel.parentNode.dataset.sliding = true;\n    delete carousel.dataset.next;\n    observersOff(carousel);\n    carousel.scrollLeft;\n    carousel.scrollTop;\n    let timeout_function = () => {\n      let index = Array.prototype.indexOf.call(carousel.children, slide);\n      if (isAutoHeight(carousel)) {\n        let old_height = parseFloat(getComputedStyle(carousel).height);\n        let new_height;\n        let offset_y = 0;\n        let lastScrollX = carousel.scrollLeft;\n        let lastScrollY = carousel.scrollTop;\n        if (isVertical(carousel)) {\n          let scroll_offset = carousel.scrollTop;\n          slide.style.height = 'auto';\n          let computed_max_height = getComputedStyle(carousel).maxHeight;\n          let max_height = computed_max_height.match(/px/) ? Math.ceil(parseFloat(computed_max_height)) : MAX_HEIGHT_FALLBACK;\n          new_height = Math.min(Math.ceil(parseFloat(getComputedStyle(slide).height)), max_height);\n          if (isModal(carousel) || isFullScreen()) {\n            old_height = new_height = carousel.offsetHeight;\n          }\n          slide.style.height = '';\n          carousel.scrollTop = scroll_offset;\n          offset_y = index * new_height - carousel.scrollTop;\n        } else {\n          new_height = nextSlideHeight(slide);\n          if (!!lastScrollX) { // Because RTL auto height landing on first slide creates an infinite intersection observer loop\n            scrollTo(carousel, lastScrollX, lastScrollY);\n          }\n        }\n        if (old_height === new_height) {\n          new_height = false;\n        }\n        window.requestAnimationFrame(() => {\n          scrollAnimate(carousel, 0, offset_y, new_height, old_height).then(() => {});\n        });\n      } else {\n        window.requestAnimationFrame(() => {\n          updateCarousel(carousel);\n        });\n      }\n    };\n    setTimeout(timeout_function, SCROLL_END_TIMEOUT);\n  };\n  const hashNavigation = e => { // Hash navigation support\n    if (!!location.hash) {\n      let el = document.querySelector(location.hash);\n      let carousel = el?.parentNode;\n      if (!!carousel && carousel.classList.contains('n-carousel__content') && !carousel.parentNode.closest('.n-carousel__content')) {\n        let modal_carousel = document.querySelector('.n-carousel--overlay > .n-carousel__content');\n        if (modal_carousel && modal_carousel !== carousel) {\n          closeModal(modal_carousel);\n        }\n        if (carousel.parentNode.classList.contains('n-carousel--inline')) {\n          closeModal(carousel);\n        }\n        if (isSafari) { // Safari has already scrolled and needs to rewind it scroll position in order to animate it\n          scrollTo(carousel, carousel.offsetWidth * carousel.dataset.x, carousel.offsetHeight * carousel.dataset.y);\n        }\n        slideTo(carousel, Array.prototype.indexOf.call(carousel.children, el));\n        window.nCarouselNav = [carousel, location.hash];\n      }\n    } else {\n      if (window.nCarouselNav) { // Previously navigated to a slide\n        let carousel = window.nCarouselNav[0];\n        delete window.nCarouselNav;\n        if (isSafari) { // Safari has already scrolled and needs to rewind it scroll position in order to animate it\n          scrollTo(carousel, carousel.offsetWidth * carousel.dataset.x, carousel.offsetHeight * carousel.dataset.y);\n        }\n        slideTo(carousel, Array.prototype.indexOf.call(carousel.children, carousel.querySelector(':scope > :not([id])')));\n      }\n    }\n  };\n  const nextSlideHeight = el => {\n    el.style.height = 0;\n    el.style.overflow = \"auto\";\n    const height = el.scrollHeight; // Ceiling when subpixel\n    el.style.height = el.style.overflow = \"\";\n    return height;\n  };\n  const getIndex = el => 1 * (isVertical(el) ? el.dataset.y : el.dataset.x);\n  const getIndexReal = el => {\n    let active_slide = el.querySelector(':scope > [aria-current]');\n    if (active_slide) {\n      return [...el.children].indexOf(active_slide);\n    } else {\n      let hash_slide = null;\n      if (location.hash && location.hash.length > 1) {\n        try {\n          hash_slide = el.querySelector(`:scope > ${location.hash}`);\n        } catch (e) {\n          // Invalid selector, ignore\n        }\n      }\n      let hash_slide_index = hash_slide ? Array.prototype.indexOf.call(el.children, hash_slide) : -1;\n      return (hash_slide_index > -1) ? hash_slide_index : 0;\n    }\n  };\n  const scrolledAncestor = el => {\n    el = el.parentNode;\n    while (el) {\n      if (el.scrollTop !== 0 || el.scrollLeft !== 0) {\n        return el;\n      } else {\n        el = el.parentNode;\n      }\n    }\n    return false;\n  };\n  const scrolledAncestors = el => {\n    let arr = [];\n    let a = scrolledAncestor(el);\n    while (a && typeof a.scrollLeft !== \"undefined\" && (a.scrollTop !== 0 || a.scrollLeft !== 0)) {\n      arr.push(a);\n      a = scrolledAncestor(a);\n    }\n    return arr;\n  };\n  const isRTL = el => getComputedStyle(el).direction === \"rtl\";\n  const toggleFullScreen = el => {\n    el = el.closest(\".n-carousel\");\n    let carousel = el.querySelector(\":scope > .n-carousel__content\");\n    const restoreScroll = () => {\n      if (!isFullScreen()) {\n        el.nuiAncestors.forEach(el => {\n          window.requestAnimationFrame(() => {\n            el.scrollLeft = el.nuiScrollX;\n            el.scrollTop = el.nuiScrollY;\n            delete el.nuiScrollX;\n            delete el.nuiScrollY;\n          });\n        });\n        delete el.nuiAncestors;\n        el.removeEventListener(\"webkitfullscreenchange\", restoreScroll);\n      }\n    };\n    carousel.togglingFullScreen = true;\n    if (isFullScreen()) {\n      // Exit full screen\n      !!document.exitFullscreen ? document.exitFullscreen() : document.webkitExitFullscreen();\n      if (isSafari) {\n        // When exit finishes, update the carousel because on Safari 14, position is wrong or the slide is invisible\n        setTimeout(() => {\n          el.style.display = \"none\";\n          window.requestAnimationFrame(() => {\n            el.style.display = \"\";\n          });\n        }, 0);\n      }\n      if (isVertical(el) && isAutoHeight(el)) {\n        let updateExitFullScreen = e => {\n          setTimeout(() => {\n            let carousel = el.querySelector(\":scope > .n-carousel__content\");\n            slideTo(carousel, parseInt(carousel.dataset.y));\n          }, 100);\n          el.removeEventListener('fullscreenchange', updateExitFullScreen);\n        };\n        el.addEventListener('fullscreenchange', updateExitFullScreen);\n      }\n    } else {\n      // Enter full screen\n      if (isSafari) {\n        el.nuiAncestors = scrolledAncestors(el);\n        el.nuiAncestors.forEach(el => {\n          el.nuiScrollX = el.scrollLeft;\n          el.nuiScrollY = el.scrollTop;\n        });\n        el.addEventListener(\"webkitfullscreenchange\", restoreScroll, false);\n      }\n      !!el.requestFullscreen ? el.requestFullscreen() : el.webkitRequestFullscreen();\n    }\n  };\n  const scrollStartX = el => el.scrollLeft; // Get correct start scroll position for LTR and RTL\n  const scrollTo = (el, x, y) => {\n    el.scrollTo(isRTL(el) ? -1 * Math.abs(x) : x, y); // Scroll to correct scroll position for LTR and RTL\n  };\n  const getScroll = el => (el === window ? {\n    x: el.scrollX,\n    y: el.scrollY\n  } : {\n    x: scrollStartX(el),\n    y: el.scrollTop\n  });\n  let firstFocusableElement = null;\n  let focusableContent = null;\n  let lastFocusableElement = null;\n  const focusHandler = e => {\n    let isTabPressed = e.key === \"Tab\" || e.keyCode === 9;\n    if (!isTabPressed) {\n      return;\n    }\n    if (e.shiftKey) {\n      // if shift key pressed for shift + tab combination\n      if (document.activeElement === firstFocusableElement) {\n        lastFocusableElement.focus(); // add focus for the last focusable element\n        e.preventDefault();\n      }\n    } else {\n      // if tab key is pressed\n      if (document.activeElement === lastFocusableElement) {\n        // if focused has reached to last focusable element then focus first focusable element after pressing tab\n        firstFocusableElement.focus(); // add focus for the first focusable element\n        e.preventDefault();\n      }\n    }\n  };\n  const trapFocus = (modal, off = false) => {\n    // FROM: https://uxdesign.cc/how-to-trap-focus-inside-modal-to-make-it-ada-compliant-6a50f9a70700\n    // add all the elements inside modal which you want to make focusable\n    firstFocusableElement = modal.querySelectorAll(focusableElements)[0]; // get first element to be focused inside modal\n    focusableContent = modal.querySelectorAll(focusableElements);\n    lastFocusableElement = focusableContent[focusableContent.length - 1]; // get last element to be focused inside modal\n    if (off) {\n      modal.removeEventListener(\"keydown\", focusHandler);\n    } else {\n      modal.addEventListener(\"keydown\", focusHandler);\n      firstFocusableElement.focus();\n    }\n  };\n  const inOutSine = (n) => (1 - Math.cos(Math.PI * n)) / 2;\n  const paddingX = el => parseInt(getComputedStyle(el).paddingInlineStart) * 2;\n  const paddingY = el => parseInt(getComputedStyle(el).paddingBlockStart) * 2;\n  const getControl = (carousel, control) => {\n    let detached_control = document.querySelector(`${control}[data-for=\"${carousel.id}\"]`);\n    if (detached_control) {\n      return detached_control;\n    }\n    for (let el of carousel.children) {\n      if (el.matches(control)) {\n        return el;\n      }\n      if (!el.matches(\".n-carousel__content\") && el.querySelector(control)) {\n        return el.querySelector(control);\n      }\n    }\n  };\n  const closestCarousel = el => {\n    var related_by_id = el.closest('[class*=\"n-carousel\"]').dataset.for;\n    if (!!related_by_id) {\n      return document.getElementById(related_by_id).querySelector(\".n-carousel__content\");\n    } else {\n      return el.closest(\".n-carousel\").querySelector(\".n-carousel__content\");\n    }\n  };\n  const scrollAnimate = (el, distanceX, distanceY, new_height, old_height = false) => new Promise((resolve) => {\n    // Thanks https://stackoverflow.com/posts/46604409/revisions\n    let wrapper = el.closest(\".n-carousel\");\n    if (!!wrapper.nextSlideInstant || !wrapper.dataset.ready || window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches || wrapper.matches(\".n-carousel--instant\")) {\n      scrollTo(el, getScroll(el).x + distanceX, getScroll(el).y + distanceY);\n      el.style.height = `${new_height}px`;\n      delete wrapper.nextSlideInstant;\n      updateCarousel(el);\n      resolve(el);\n      return;\n    }\n    observersOff(el);\n    let scroll_changing = true;\n    if (distanceX === 0 && distanceY === 0) {\n      scroll_changing = false;\n    }\n    if (!!new_height) {\n      el.style.height = `${old_height}px`;\n      if (isVertical(el) && isAutoHeight(el)) {\n        el.style.setProperty('--subpixel-compensation', 0);\n      }\n    } else {\n      if (!isVertical(el)) {\n        el.style.height = \"\";\n      }\n    }\n    var startx = getScroll(el).x;\n    var starty = getScroll(el).y;\n    var starth = parseInt(el.style.height);\n    var distanceH = new_height - starth;\n    var duration = parseFloat(el.parentNode.dataset.duration) * 1000 || default_duration;\n    var start = null;\n    let startAnim = (timeStamp) => {\n      start = timeStamp;\n      draw(timeStamp);\n    };\n    let draw = (now) => {\n      if (now - start >= duration) { // sliding ends\n        window.requestAnimationFrame(() => {\n          scrollTo(el, startx + distanceX, starty + distanceY);\n          if (new_height) {\n            el.style.height = `${new_height}px`;\n          }\n          updateCarousel(el);\n        });\n        resolve(el);\n        return;\n      }\n      var p = (now - start) / duration;\n      var val = inOutSine(p);\n      var x = startx + distanceX * val;\n      var y = starty + distanceY * val;\n      if (scroll_changing) {\n        scrollTo(el, x, y);\n      }\n      if (new_height) {\n        window.requestAnimationFrame(() => {\n          el.style.height = `${starth + distanceH * val}px`;\n        }); // Timeout because Safari can't do scroll and height at once\n      }\n      requestAnimationFrame(draw);\n    };\n    requestAnimationFrame(startAnim);\n  });\n  const updateCarousel = (el, forced = false) => { // Forced means never skip unnecessary update\n    // Called on init and scroll end\n    if (el.togglingFullScreen) {\n      return;\n    }\n    observersOff(el);\n    let saved_x = el.dataset.x; // On displaced slides and no change\n    let saved_y = el.dataset.y;\n    el.dataset.x = Math.abs(Math.round(scrollStartX(el) / ceilingWidth(el.firstElementChild)));\n    el.dataset.y = Math.abs(Math.round(el.scrollTop / ceilingHeight(el.firstElementChild)));\n    // When inline\n    if (el.dataset.x === \"NaN\") {\n      el.dataset.x = 0;\n    }\n    if (el.dataset.y === \"NaN\") {\n      el.dataset.y = 0;\n    }\n    let active_index = getIndex(el);\n    if (active_index >= el.children.length) {\n      active_index = el.children.length - 1;\n    }\n    let old_active_slide = el.querySelector(\":scope > [aria-current]\");\n    let wrapper = el.parentElement;\n    if (!isAutoHeight(wrapper)) {\n      // Dynamic change from auto height to normal\n      el.style.height = \"\";\n    }\n    let active_slide = el.children[active_index];\n    if (old_active_slide && !forced) {\n      if (active_slide === old_active_slide) {\n        // Scroll snapping back to the same slide. Nothing to do here.\n        el.dataset.x = saved_x;\n        el.dataset.y = saved_y;\n        observersOn(el);\n        return;\n      }\n      old_active_slide.removeAttribute('aria-current');\n      old_active_slide.style.height = \"\";\n      if (!isVertical(el)) {\n        el.style.height = \"\";\n      }\n    }\n    // active_slide.ariaCurrent = true; // Unsupported by FF\n    active_slide.setAttribute('aria-current', true);\n    var active_index_real = el.dataset.x = el.dataset.y = getIndexReal(el);\n    // Endless carousel\n    const restoreDisplacedSlides = el => {\n      el.querySelectorAll(\":scope > [data-first]\").forEach(el2 => {\n        el.append(el.firstElementChild);\n        delete el2.dataset.first;\n        active_index--;\n      });\n      el.querySelectorAll(\":scope > [data-last]\").forEach(el2 => {\n        el.prepend(el.lastElementChild);\n        delete el2.dataset.last;\n        active_index++;\n      });\n    };\n    wrapper.dataset.sliding = true;\n    if (isEndless(el) && !forced) {\n      if (active_index === 0) {\n        if (!active_slide.dataset.first) {\n          // Move the last one to the front as [data-first]\n          if (el.lastElementChild.dataset.last) {\n            delete el.lastElementChild.dataset.last;\n            active_index_real = 1;\n          } else {\n            el.lastElementChild.dataset.first = true;\n          }\n          el.prepend(el.lastElementChild);\n          active_index = 1;\n        } else {\n          // Landed on fake first slide. Move it to the back, remove its [data-first] and move the first one to the back as [data-last]\n          delete el.firstElementChild.dataset.first;\n          el.append(el.firstElementChild);\n          el.firstElementChild.dataset.last = true;\n          el.append(el.firstElementChild);\n          active_index_real = el.children.length - 1;\n          active_index = el.children.length - 2;\n        }\n      } else {\n        if (active_index === el.children.length - 1) {\n          if (!active_slide.dataset.last) {\n            // Move the first one to the back as [data-last]\n            if (el.firstElementChild.dataset.first) {\n              delete el.firstElementChild.dataset.first;\n              active_index_real = el.children.length - 2;\n            } else {\n              el.firstElementChild.dataset.last = true;\n            }\n            el.append(el.firstElementChild);\n            active_index = el.children.length - 2;\n          } else {\n            // Landed on fake last slide. Move it to the front, remove its [data-last] and move the last one to the front as [data-first]\n            delete el.lastElementChild.dataset.last;\n            el.prepend(el.lastElementChild);\n            el.lastElementChild.dataset.first = true;\n            el.prepend(el.lastElementChild);\n            active_index_real = 0;\n            active_index = 1;\n          }\n        } else {\n          // Middle slide\n          restoreDisplacedSlides(el);\n          let activeSlide = el.querySelector(\":scope > [aria-current]\");\n          active_index_real = activeSlide ? Math.max(0, Array.prototype.indexOf.call(el.children, activeSlide)) : 0; // Fixes position when sliding to/from first slide; max because of FF returning -1\n        }\n      }\n      const updateScroll = () => {\n        el.dataset.x = el.dataset.y = active_index_real;\n        let scroll_x = ceilingWidth(el.firstElementChild) * active_index;\n        let scroll_y = ceilingHeight(el.firstElementChild) * active_index;\n        el.scroll_x = scroll_x;\n        el.scroll_y = scroll_y;\n        scrollTo(el, scroll_x, scroll_y); // First element size, because when Peeking, it differs from carousel size\n        delete el.scroll_x;\n        delete el.scroll_y;\n      };\n      if (isVertical(el) && isAutoHeight(el)) {\n        window.requestAnimationFrame(() => { // Causes blinking, but needed for vertical auto height endless\n          updateScroll();\n        });\n      } else {\n        updateScroll();\n      }\n    } else { // Check and restore dynamically disabled endless option\n      restoreDisplacedSlides(el);\n      let activeSlide = el.querySelector(\":scope > [aria-current]\");\n      active_index_real = activeSlide ? Math.max(0, Array.prototype.indexOf.call(el.children, activeSlide)) : 0; // Fixes position when sliding to/from first slide; max because of FF returning -1\n    }\n    active_slide.style.height = \"\";\n    wrapper.style.setProperty(\"--height\", `${isAutoHeight(el) ? nextSlideHeight(active_slide) : active_slide.scrollHeight}px`);\n    window.requestAnimationFrame(() => {\n      if (!el.parentNode.dataset.ready && isAutoHeight(el) && isVertical(el)) {\n        el.style.height = `${parseFloat(getComputedStyle(el).height) - paddingY(el)}px`;\n      }\n    });\n    // Sliding to a slide with a hash? Update the URI\n    if (getComputedStyle(el).visibility !== 'hidden') {\n      let previously_active = document.activeElement;\n      let hash = active_slide.id;\n      if (!!el.parentNode.dataset.ready && !!hash && !el.parentNode.closest('.n-carousel__content')) { // Hash works only with top-level carousel\n        location.hash = `#${hash}`;\n      }\n      if (!!el.parentNode.dataset.ready && !hash && !el.parentNode.closest('.n-carousel__content') && window.nCarouselNav) { // Hash works only with top-level carousel\n        location.hash = '';\n      }\n      previously_active.focus();\n    }\n    // Fix buttons\n    let index = getControl(el.closest(\".n-carousel\"), \".n-carousel__index\");\n    if (!!index) {\n      index.querySelector(\"[aria-current]\")?.removeAttribute('aria-current');\n      // index.children[active_index_real].ariaCurrent = true; // Unsupported by FF\n      indexControls(index)[active_index_real].setAttribute('aria-current', true);\n    }\n    // Disable focus on children of non-active slides\n    // Active slides of nested carousels should also have disabled focus\n    [...el.children].forEach(el => { // Native \"inert\" attribute to replace the below \"focusDisabled\" loops from June 2022. \n      el.inert = (el === active_slide) ? false : true;\n      if (isSafari && el.querySelector('.n-carousel:-webkit-full-screen')) {\n        // Safari full screen bug: parent scroll resets to 0, first slide becomes active and the full screen child lightbox is inside an inert parent\n        let current = el.parentNode.querySelector(':scope > [aria-current=\"true\"]');\n        current.inert = true;\n        current.removeAttribute('aria-current');\n        el.inert = false;\n        el.setAttribute('aria-current', true);\n      }\n    });\n    if (/--vertical.*--auto-height/.test(wrapper.classList)) { // Undo jump to wrong slide when sliding to the last one\n      el.scrollTop = el.offsetHeight * active_index_real;\n    }\n    window.requestAnimationFrame(() => {\n      observersOn(el);\n    });\n  };\n  const slide = (el, offsetX = 0, offsetY = 0, index) => {\n    clearTimeout(el.nCarouselTimeout);\n    if (!el.parentNode.dataset.sliding) {\n      el.parentNode.dataset.sliding = true;\n      let old_height = el.children[getIndexReal(el)].offsetHeight;\n      let new_height = old_height;\n      if (isAutoHeight(el)) {\n        let old_scroll_left = scrollStartX(el);\n        let old_scroll_top = el.scrollTop;\n        let slide = el.children[index];\n        if (isVertical(el)) {\n          slide.style.height = 'auto';\n          let computed_max_height = getComputedStyle(el).maxHeight;\n          let max_height = computed_max_height.match(/px/) ? Math.ceil(parseFloat(computed_max_height)) : MAX_HEIGHT_FALLBACK;\n          new_height = Math.min(Math.ceil(parseFloat(getComputedStyle(slide).height)), max_height);\n          slide.style.height = '';\n        } else {\n          new_height = nextSlideHeight(slide);\n          let old_height = getIndexReal(el) === index ? new_height : nextSlideHeight(el.children[getIndexReal(el)]);\n          el.parentNode.style.setProperty(\"--height\", `${old_height}px`);\n        }\n        scrollTo(el, old_scroll_left + paddingX(el) / 2, old_scroll_top); // iPad bug\n        scrollTo(el, old_scroll_left, old_scroll_top);\n      }\n      if (isVertical(el)) {\n        if ((isModal(el) || isFullScreen()) && isAutoHeight(el)) {\n          old_height = new_height = el.offsetHeight;\n        }\n        offsetY = offsetY - index * old_height + index * new_height;\n      }\n      window.requestAnimationFrame(() => {\n        if (!el.parentNode.dataset.duration && !isAutoHeight(el)) { // Unspecified duration, no height change using native smooth scroll\n          delete el.parentNode.dataset.sliding;\n          el.dataset.next = index;\n          el.scrollTo({\n            top: el.scrollTop + offsetY,\n            left: el.scrollLeft + offsetX,\n            behavior: window.matchMedia('(prefers-reduced-motion: reduce)').matches ? \"auto\" : \"smooth\"\n          });\n        } else {\n          scrollAnimate(el, offsetX, offsetY, new_height === old_height ? false : new_height, old_height); // Vertical version will need ceiling value\n        }\n      });\n    }\n  };\n  const slideNext = el => {\n    let index = getIndexReal(el);\n    slideTo(el, index >= el.children.length - 1 ? 0 : index + 1);\n  };\n  const slidePrevious = el => {\n    let index = getIndexReal(el);\n    slideTo(el, index === 0 ? el.children.length - 1 : index - 1);\n  };\n  const slideTo = (el, index) => {\n    if (isVertical(el)) {\n      slide(el, 0, ceilingHeight(el.children[index]) * index - el.scrollTop, index);\n    } else {\n      let width = Math.ceil(parseFloat(getComputedStyle(el.children[index]).width));\n      let new_offset = isRTL(el) ? Math.abs(scrollStartX(el)) - width * index : width * index - scrollStartX(el);\n      slide(el, new_offset, 0, index);\n    }\n  };\n  const carouselKeys = e => {\n    let keys = [\"ArrowLeft\", \"ArrowRight\", \"ArrowUp\", \"ArrowDown\", \"PageUp\", \"PageDown\", \"Home\", \"End\"];\n    let el = e.target.closest('.n-carousel').querySelector(':scope > .n-carousel__content');\n    if (keys.includes(e.key)) {\n      // Capture relevant keys\n      // e.preventDefault();\n      switch (e.key) {\n        case \"ArrowLeft\": {\n          isRTL(el) ? slideNext(el) : slidePrevious(el);\n          break;\n        }\n        case \"ArrowRight\": {\n          isRTL(el) ? slidePrevious(el) : slideNext(el);\n          break;\n        }\n        case \"ArrowUp\":\n        case \"PageUp\": {\n          slidePrevious(el);\n          break;\n        }\n        case \"ArrowDown\":\n        case \"PageDown\": {\n          slideNext(el);\n          break;\n        }\n        case \"Home\": {\n          slideTo(el, 0);\n          break;\n        }\n        case \"End\": {\n          slideTo(el, el.children.length - 1);\n          break;\n        }\n      }\n    }\n  };\n  const slidePreviousEvent = e => slidePrevious(closestCarousel(e.target.closest('[class*=\"n-carousel\"]')));\n  const slideNextEvent = e => slideNext(closestCarousel(e.target.closest('[class*=\"n-carousel\"]')));\n  const slideIndexEvent = e => {\n    let el = e.target.closest(\"a, button\");\n    if (el && !(el.href && (e.ctrlKey || e.metaKey))) {\n      const wrapper = document.querySelector(`.n-carousel#${el.parentNode.dataset.for}`) || el.closest(\".n-carousel\");\n      const carousel = wrapper.querySelector(\":scope > .n-carousel__content\");\n      let new_index = Array.prototype.indexOf.call(indexControls(el.parentNode), el);\n      if (isEndless(carousel)) {\n        var old_index = getIndex(carousel);\n        if (old_index === 0) {\n          if (new_index === carousel.children.length - 1) {\n            new_index = 0;\n          } else {\n            new_index++;\n          }\n        }\n        if (old_index === carousel.children.length - 1) {\n          if (new_index === 0) {\n            new_index = carousel.children.length - 1;\n          } else {\n            new_index--;\n          }\n        }\n      }\n      if (wrapper.classList.contains(\"n-carousel--inline\") && !isModal(carousel)) { // Opening an inline carousel\n        wrapper.nextSlideInstant = true;\n        openModal(carousel);\n        // Set new x, y\n        window.requestAnimationFrame(() => {\n          carousel.dataset.x = carousel.dataset.y = new_index;\n          scrollTo(carousel, carousel.offsetWidth * carousel.dataset.x, carousel.offsetHeight * carousel.dataset.y);\n          document.body.dataset.frozen = document.body.scrollTop;\n          updateCarousel(carousel);\n        });\n      } else {\n        window.requestAnimationFrame(() => {\n          slideTo(carousel, new_index);\n        });\n      }\n      return false;\n    }\n  };\n  const closeModalOnBodyClick = e => {\n    let overlay = document.querySelector('.n-carousel--overlay');\n    if (overlay && e.key === 'Escape') {\n      closeModal(overlay);\n    }\n  };\n  const closeModal = el => {\n    if (isFullScreen()) {\n      !!document.exitFullscreen ? document.exitFullscreen() : document.webkitExitFullscreen();\n    }\n    let carousel = closestCarousel(el);\n    if (carousel) {\n      carousel.parentNode.toggleModal = true; // skip mutation observer\n      carousel.closest(\".n-carousel\").classList.remove(\"n-carousel--overlay\");\n      trapFocus(carousel.closest(\".n-carousel\"), true); // Disable focus trap\n      delete document.body.dataset.frozen;\n    }\n    document.body.removeEventListener('keyup', closeModalOnBodyClick);\n  };\n  const openModal = el => {\n    let carousel = closestCarousel(el);\n    if (carousel) {\n      carousel.parentNode.toggleModal = true; // skip mutation observer\n      carousel.closest(\".n-carousel\").classList.add(\"n-carousel--overlay\");\n      trapFocus(carousel.closest(\".n-carousel\"));\n      setTimeout(() => { document.body.addEventListener('keyup', closeModalOnBodyClick); }, 100);\n    }\n  };\n  const autoHeightObserver = new ResizeObserver((entries) => {\n    window.requestAnimationFrame(() => {\n      entries.forEach(e => {\n        let slide = e.target.querySelector(\":scope > [aria-current]\");\n        let el = slide.closest(\".n-carousel__content\");\n        if (!el.parentElement.dataset.sliding) {\n          el.parentNode.style.removeProperty('--height');\n          if (isVertical(el)) {\n            slide.style.height = 'auto';\n            el.style.height = `${slide.scrollHeight}px`;\n            slide.style.height = '';\n            updateCarousel(el);\n          } else {\n            el.style.height = '';\n            el.style.height = `${slide.scrollHeight}px`;\n            updateCarousel(el, true);\n          }\n        }\n      });\n    });\n  });\n  const updateSubpixels = el => {\n    if (!el.parentNode.dataset.sliding) {\n      // Round down the padding, because sub pixel padding + scrolling is a problem\n      let carousel = el;\n      carousel.style.padding = ''; // Subpixel peeking fix\n      carousel.style.removeProperty(\"--peek-int\");\n      carousel.style.padding = isVertical(carousel) ? `${parseInt(getComputedStyle(carousel).paddingBlockStart)}px 0` : `0 ${parseInt(getComputedStyle(carousel).paddingInlineStart)}px`;\n      if (carousel.style.padding === '0px') {\n        carousel.style.padding = '';\n      } else {\n        // For Safari, which doesn't support inline end padding in a scrollable container\n        carousel.style.setProperty(\"--peek-int\", isVertical(carousel) ? `${parseInt(getComputedStyle(carousel).paddingBlockStart)}px 0 0 0` : `0 ${parseInt(getComputedStyle(carousel).paddingInlineStart)}px 0 0`);\n      }\n      window.requestAnimationFrame(() => {\n        if (isVertical(el)) {\n          carousel.style.setProperty(\"--subpixel-compensation\", Math.ceil(carousel.getBoundingClientRect().height) - carousel.getBoundingClientRect().height);\n        } else {\n          carousel.style.setProperty(\"--subpixel-compensation\", Math.ceil(carousel.getBoundingClientRect().width) - carousel.getBoundingClientRect().width);\n        }\n        let offset = getIndexReal(carousel);\n        if (carousel.firstElementChild) {\n          scrollTo(carousel, offset * ceilingWidth(carousel.firstElementChild), offset * ceilingHeight(carousel.firstElementChild));\n        }\n      });\n    }\n  };\n  const observersOn = el => {\n    window.requestAnimationFrame(() => {\n      if (el.scroll_x && el.scroll_y) {\n        scrollTo(el, el.scroll_x, el.scroll_y);\n      }\n      if (el.parentNode.matches(\".n-carousel--vertical.n-carousel--controls-outside.n-carousel--auto-height\")) {\n        height_minus_index.observe(el.parentNode);\n      } else {\n        height_minus_index.unobserve(el.parentNode);\n      }\n      subpixel_observer.observe(el);\n      mutation_observer.observe(el.parentNode, {\n        attributes: true,\n        attributeFilter: [\"class\"],\n      });\n      el.addEventListener('scrollend', scrollEndAction);\n      // setTimeout(() => {\n      delete el.parentNode.dataset.sliding;\n      // }, 50); // Because intersection observer fires again\n      if (!(\"onscrollend\" in window) && isEndless(el)) { // Fix for browsers without scrollend event (Safari) losing parts of the edge slide\n        scrollTo(el, el.offsetWidth * getIndexReal(el), el.offsetHeight * getIndexReal(el));\n      }\n    });\n  };\n  const observersOff = el => {\n    height_minus_index.unobserve(el.parentNode);\n    subpixel_observer.unobserve(el);\n    el.observerStarted = true;\n    el.removeEventListener('scrollend', scrollEndAction);\n  };\n  const updateObserver = el => {\n    observersOff(el);\n    const doUpdate = el => {\n      updateSubpixels(el);\n      window.requestAnimationFrame(() => {\n        let current_height = el.querySelector(\":scope > [aria-current]\").scrollHeight + \"px\";\n        let previous_height = getComputedStyle(el).getPropertyValue(\"--height\");\n        if (current_height !== previous_height) {\n          el.parentNode.style.setProperty(\"--height\", current_height);\n        }\n        observersOn(el);\n      });\n    };\n    doUpdate(el);\n    el.querySelectorAll('.n-carousel__content').forEach(el => doUpdate(el));\n  };\n  const subpixel_observer = new ResizeObserver((entries) => {\n    window.requestAnimationFrame(() => {\n      entries.forEach(e => {\n        let el = e.target;\n        if (!!el.observerStarted) {\n          el.observerStarted = false;\n          return;\n        }\n        updateObserver(el);\n      });\n    });\n  });\n  const mutation_observer = new MutationObserver((mutations) => {\n    for (let mutation of mutations) {\n      if (mutation.target && !mutation.target.nextSlideInstant && !mutation.target.toggleModal) {\n        let carousel = mutation.target.querySelector(\":scope > .n-carousel__content\");\n        updateObserver(carousel);\n        updateCarousel(carousel, true);\n        delete mutation.target.toggleModal;\n      }\n    }\n  });\n  const setIndexWidth = el => {\n    let index = el.querySelector(\":scope > .n-carousel__index\");\n    if (index && !el.dataset.sliding) {\n      el.style.removeProperty(\"--height-minus-index\");\n      index.style.position = \"absolute\";\n      el.style.setProperty(\"--height-minus-index\", `${el.offsetHeight}px`);\n      el.style.setProperty(\"--index-width\", getComputedStyle(el.querySelector(\":scope > .n-carousel__index\")).width);\n      index.style.position = \"\";\n    }\n  };\n  const height_minus_index = new ResizeObserver((entries) => {\n    // Limit outside index height to carousel height\n    window.requestAnimationFrame(() => {\n      // Observing the carousel wrapper\n      entries.forEach(e => {\n        let el = e.target;\n        setIndexWidth(el);\n      });\n    });\n  });\n  const init = (host = document) => {\n    host.querySelectorAll(\".n-carousel:not([data-ready])\").forEach(el => {\n      const previous = getControl(el, \".n-carousel__previous\");\n      const next = getControl(el, \".n-carousel__next\");\n      const index = getControl(el, \".n-carousel__index\");\n      const close_modal = getControl(el, \".n-carousel__close\");\n      const full_screen = getControl(el, \".n-carousel__full-screen\");\n      const content = el.querySelector(\":scope > .n-carousel__content\");\n      if (!content) {\n        return;\n      }\n      if (!!previous) {\n        previous.onclick = slidePreviousEvent;\n      }\n      if (!!next) {\n        next.onclick = slideNextEvent;\n      }\n      if (!!index) {\n        index.onclick = slideIndexEvent;\n      }\n      if (!!close_modal) {\n        close_modal.onclick = e => {\n          if (e.target.closest('.n-carousel').classList.contains('n-carousel--overlay')) {\n            closeModal(e.target);\n          } else {\n            openModal(e.target);\n          }\n        };\n      }\n      if (!!full_screen) {\n        full_screen.onclick = e => {\n          let carousel = e.target.closest(\".n-carousel\").querySelector(\":scope > .n-carousel__content\");\n          carousel.dataset.xx = carousel.dataset.x;\n          carousel.dataset.yy = carousel.dataset.y;\n          toggleFullScreen(e.target);\n        };\n        const fullScreenEvent = e => {\n          let carousel = e.target.querySelector(\":scope > .n-carousel__content\");\n          window.requestAnimationFrame(() => {\n            carousel.dataset.x = carousel.dataset.xx;\n            carousel.dataset.y = carousel.dataset.yy;\n            delete carousel.dataset.xx;\n            delete carousel.dataset.yy;\n            if (carousel.dataset.x !== \"undefined\" && carousel.dataset.y !== \"undefined\") {\n              scrollTo(carousel, getIndexReal(carousel) * ceilingWidth(carousel.children[getIndexReal(carousel)]), getIndexReal(carousel) * ceilingHeight(carousel.children[getIndexReal(carousel)]));\n            }\n            delete carousel.togglingFullScreen;\n            updateCarousel(carousel);\n          });\n        };\n        if (isSafari) {\n          el.onwebkitfullscreenchange = fullScreenEvent;\n        } else {\n          el.onfullscreenchange = fullScreenEvent;\n        }\n      }\n      el.addEventListener(\"keydown\", carouselKeys);\n      el.addEventListener(\"keyup\", e => {\n        if (e.key === \"Escape\") {\n          let el = e.target;\n          if (!el.closest('.n-carousel--overlay')) {\n            el = document.querySelector('.n-carousel--overlay');\n          }\n          if (el) {\n            closeModal(el);\n          }\n        }\n      });\n      updateSubpixels(content);\n      content.observerStarted = true;\n      let hashed_slide = false;\n      if (location.hash && location.hash.length > 1) {\n        try {\n          hashed_slide = content.querySelector(\":scope > \" + location.hash);\n        } catch (e) {\n          // Invalid selector, ignore\n        }\n      }\n      if (hashed_slide) {\n        if (el.classList.contains('n-carousel--inline')) {\n          openModal(content);\n        }\n        let index = Array.prototype.indexOf.call(hashed_slide.parentNode.children, hashed_slide);\n        if (isVertical(content)) {\n          content.dataset.y = index;\n        } else {\n          content.dataset.x = index;\n        }\n        // slideTo(content, index); // This slides to the wrong slide\n        window.nCarouselNav = [content, location.hash];\n      }\n      if (el.matches(\".n-carousel--vertical.n-carousel--auto-height\")) {\n        content.style.height = '';\n        content.style.height = getComputedStyle(content).height;\n        el.dataset.ready = true;\n        content.scrollTop = 0; // Should be a different value if the initial active slide is other than the first one (unless updateCarousel() takes care of it)\n      }\n      if (isAutoHeight(el)) {\n        // Auto has a specified height which needs update on resize\n        autoHeightObserver.observe(content);\n      }\n      window.requestAnimationFrame(() => {\n        observersOn(content);\n        if (el.parentNode.matches(\".n-carousel--vertical.n-carousel--controls-outside.n-carousel--auto-height\")) {\n          setIndexWidth(el);\n        }\n        updateCarousel(content);\n        el.dataset.ready = true;\n        if (el.matches(\".n-carousel--auto-slide\")) {\n          let auto_delay = (parseFloat(el.dataset.interval) * 1000 || default_interval) + (parseFloat(el.dataset.duration) * 1000 || default_duration);\n          let carouselTimeout = () => {\n            if (isElementInViewport(content)) {\n              slideNext(content);\n            }\n            content.nCarouselTimeout = setTimeout(carouselTimeout, auto_delay);\n          };\n          content.nCarouselTimeout = setTimeout(carouselTimeout, parseFloat(el.dataset.interval) * 1000 || default_interval);\n          content.addEventListener(\"pointerenter\", e => clearTimeout(e.target.nCarouselTimeout));\n        }\n        el.dataset.platform = navigator.platform; // iPhone doesn't support full screen, Windows scroll works differently\n      });\n      content.nCarouselUpdate = updateCarousel;\n      if (el.matches('.n-carousel--lightbox')) {\n        let loaded = img => {\n          img.closest('picture').dataset.loaded = true;\n        };\n        content.querySelectorAll(\"picture img\").forEach(el => {\n          if (el.complete) {\n            loaded(el);\n          } else {\n            el.addEventListener(\"load\", e => {\n              loaded(e.target);\n            });\n          }\n        });\n      }\n    });\n  };\n  window.nCarouselInit = init;\n  window.addEventListener('popstate', hashNavigation);\n  const doInit = () => {\n    (typeof nui !== 'undefined' && typeof nui.registerComponent === \"function\") ? nui.registerComponent(\"n-carousel\", init): init();\n  };\n  if (document.readyState !== \"loading\") {\n    doInit();\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", doInit);\n  }\n})();\n"]}