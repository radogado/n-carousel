{"version":3,"names":["e","t","length","n","r","Array","Symbol","iterator","call","next","bind","isArray","Object","prototype","toString","slice","constructor","name","from","test","o","done","value","TypeError","window","apply","arguments","this","unshift","s","l","get","c","scrollListener","clearTimeout","setTimeout","a","size","dispatchEvent","i","listeners","set","delete","Event","Set","document","addEventListener","changedTouches","add","identifier","passive","WeakMap","Element","ceilingWidth","el","Math","ceil","parseFloat","getComputedStyle","width","ceilingHeight","height","focusableElements","sanitizeHash","hash","cleanHash","replace","isChrome","navigator","userAgent","match","isSafari","isEndless","children","parentElement","classList","contains","isFullScreen","webkitFullscreenElement","fullscreenElement","isModal","closest","isVertical","matches","isAutoHeight","indexControls","index","controls_by_class","querySelectorAll","scrollEndAction","carousel","target","computedStyle","abs","round","scrollTop","offsetHeight","paddingBlockStart","paddingBlockEnd","scrollLeft","offsetWidth","paddingInlineStart","paddingInlineEnd","slide","parentNode","sliding","dataset","parseInt","indexOf","observersOff","carouselStyle","new_height","old_height","offset_y","lastScrollX","lastScrollY","scroll_offset","style","computed_max_height","maxHeight","max_height","slideStyle","min","nextSlideHeight","scrollTo","requestAnimationFrame","scrollAnimate","then","updateCarousel","overflow","scrollHeight","getIndex","y","x","getIndexReal","active_slide","querySelector","safeHash","location","hashSlide","scrolledAncestor","isRTL","direction","toggleFullScreen","restoreScroll","nuiAncestors","forEach","nuiScrollX","nuiScrollY","removeEventListener","togglingFullScreen","exitFullscreen","webkitExitFullscreen","display","updateExitFullScreen","slideTo","arr","push","scrolledAncestors","requestFullscreen","webkitRequestFullscreen","scrollStartX","getScroll","scrollX","scrollY","firstFocusableElement","focusableContent","lastFocusableElement","focusHandler","key","keyCode","shiftKey","activeElement","focus","preventDefault","trapFocus","modal","off","getControl","control","detached_control","id","closestCarousel","carouselWrapper","related_by_id","for","targetElement","getElementById","nCarousel","distanceX","distanceY","Promise","resolve","wrapper","nextSlideInstant","ready","matchMedia","scroll_changing","setProperty","startx","starty","starth","distanceH","duration","start","draw","now","val","cos","PI","inOutSine","timeStamp","forced","saved_x","saved_y","firstChild","firstElementChild","observersOn","active_index","old_active_slide","removeAttribute","setAttribute","active_index_real","restoreDisplacedSlides","el2","append","first","prepend","lastElementChild","last","max","updateScroll","scroll_x","scroll_y","paddingY","visibility","previously_active","nCarouselNav","inert","current","offsetX","offsetY","nCarouselTimeout","old_scroll_left","old_scroll_top","elStyle","paddingX","top","left","behavior","slideNext","console","warn","slidePrevious","offsetParent","new_offset","carouselKeys","includes","slidePreviousEvent","slideNextEvent","slideIndexEvent","href","ctrlKey","metaKey","new_index","old_index","openModal","body","frozen","closeModalOnBodyClick","overlay","closeModal","toggleModal","remove","nextElementSibling","insertAdjacentHTML","getBoundingClientRect","autoHeightObserver","ResizeObserver","entries","removeProperty","updateSubpixels","padding","rect","offset","height_minus_index","observe","unobserve","subpixel_observer","mutation_observer","attributes","attributeFilter","observerStarted","updateObserver","doUpdate","activeSlide","current_height","getPropertyValue","MutationObserver","mutations","mutation","setIndexWidth","position","indexStyle","init","host","previous","close_modal","full_screen","content","onclick","xx","yy","fullScreenEvent","onwebkitfullscreenchange","onfullscreenchange","hashed_slide","auto_delay","interval","carouselTimeout","bottom","innerHeight","documentElement","right","innerWidth","isElementInViewport","platform","nCarouselUpdate","loaded","img","complete","nCarouselInit","modal_carousel","firstSlideWithoutId","doInit","nui","registerComponent","readyState"],"sources":["n-carousel.rollup.js"],"sourcesContent":["function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,n){var r=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(r)return (r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,n){if(t){if(\"string\"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return \"Object\"===r&&t.constructor&&(r=t.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&\"number\"==typeof t.length){r&&(t=r);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}if(!(\"onscrollend\"in window)){var n=function(e,t,n){var r=e[t];e[t]=function(){var e=Array.prototype.slice.apply(arguments,[0]);r.apply(this,e),e.unshift(r),n.apply(this,e);};},r=function(e,t,n,r){if(\"scroll\"==t||\"scrollend\"==t){var o=this,s=l.get(o);if(void 0===s){var c=0;s={scrollListener:function(e){clearTimeout(c),c=setTimeout(function(){a.size?setTimeout(s.scrollListener,100):(o.dispatchEvent(i),c=0);},100);},listeners:0},e.apply(o,[\"scroll\",s.scrollListener]),l.set(o,s);}s.listeners++;}},o=function(e,t,n){if(\"scroll\"==t||\"scrollend\"==t){var r=this,o=l.get(r);void 0!==o&&(o[t]--,--o.listeners>0||(e.apply(r,[\"scroll\",o.scrollListener]),l.delete(r)));}},i=new Event(\"scrollend\"),a=new Set;document.addEventListener(\"touchstart\",function(e){for(var n,r=t(e.changedTouches);!(n=r()).done;)a.add(n.value.identifier);},{passive:!0}),document.addEventListener(\"touchend\",function(e){for(var n,r=t(e.changedTouches);!(n=r()).done;)a.delete(n.value.identifier);},{passive:!0});var l=new WeakMap;n(Element.prototype,\"addEventListener\",r),n(window,\"addEventListener\",r),n(document,\"addEventListener\",r),n(Element.prototype,\"removeEventListener\",o),n(window,\"removeEventListener\",o),n(document,\"removeEventListener\",o);}\n\n// import './node_modules/n-modal/n-modal.js';\n(function () {\n  const ceilingWidth = (el) =>\n    Math.ceil(parseFloat(getComputedStyle(el).width));\n  const ceilingHeight = (el) =>\n    Math.ceil(parseFloat(getComputedStyle(el).height));\n  const focusableElements =\n    'button, [href], input, select, textarea, details, summary, video, [tabindex]:not([tabindex=\"-1\"])';\n  function isElementInViewport(el) {\n    let rect = el.getBoundingClientRect();\n    return (\n      rect.top >= 0 &&\n      rect.left >= 0 &&\n      rect.bottom <=\n        (window.innerHeight ||\n          document.documentElement.offsetHeight) /* or $(window).height() */ &&\n      rect.right <=\n        (window.innerWidth ||\n          document.documentElement.offsetWidth) /* or $(window).width() */\n    );\n  }\n  // Animation and timing constants\n  const default_duration = 500; // Default animation duration in milliseconds\n  const default_interval = 4000; // Default auto-slide interval in milliseconds\n  const SCROLL_END_TIMEOUT = 10; // Timeout for scroll end detection in milliseconds\n  const FULLSCREEN_UPDATE_DELAY = 100; // Delay for fullscreen updates in milliseconds\n  const MAX_HEIGHT_FALLBACK = 99999; // Fallback max height value in pixels\n\n  // Sanitize hash value to prevent XSS in querySelector\n  const sanitizeHash = (hash) => {\n    if (!hash) return null;\n    // Remove # and extract only valid CSS identifier characters\n    const cleanHash = hash.replace(/^#/, '').replace(/[^a-zA-Z0-9_-]/g, '');\n    return cleanHash ? `#${cleanHash}` : null;\n  };\n\n  const isChrome = !!navigator.userAgent.match(\"Chrome\");\n  const isSafari = navigator.userAgent.match(/Safari/) && !isChrome;\n  const isEndless = (el) =>\n    el.children.length > 2 &&\n    el.parentElement.classList.contains(\"n-carousel--endless\");\n  const isFullScreen = () => {\n    return !!(document.webkitFullscreenElement || document.fullscreenElement);\n  };\n  const isModal = (el) => {\n    return el.closest(\".n-carousel\").classList.contains(\"n-carousel--overlay\");\n  };\n  const isVertical = (el) =>\n    el.closest(\".n-carousel\").matches(\".n-carousel--vertical\");\n  const isAutoHeight = (el) =>\n    el.closest(\".n-carousel\").matches(\".n-carousel--auto-height\");\n  const indexControls = (index) => {\n    let controls_by_class = index.querySelectorAll(\".n-carousel__control\");\n    return controls_by_class.length > 0\n      ? controls_by_class\n      : index.querySelectorAll(\"a, button\");\n  };\n  const scrollEndAction = (carousel) => {\n    carousel = carousel.target || carousel;\n    // Cache computed style to avoid multiple calls\n    const computedStyle = getComputedStyle(carousel);\n    let index = Math.abs(\n      Math.round(\n        isVertical(carousel)\n          ? carousel.scrollTop /\n              (carousel.offsetHeight -\n                parseFloat(computedStyle.paddingBlockStart) -\n                parseFloat(computedStyle.paddingBlockEnd))\n          : carousel.scrollLeft /\n              (carousel.offsetWidth -\n                parseFloat(computedStyle.paddingInlineStart) -\n                parseFloat(computedStyle.paddingInlineEnd)),\n        2\n      )\n    );\n    let slide = carousel.children[index];\n    if (\n      !!carousel.parentNode.sliding ||\n      (carousel.dataset.next &&\n        parseInt(carousel.dataset.next) !==\n          Array.prototype.indexOf.call(carousel.children, slide))\n    ) {\n      return;\n    }\n    carousel.parentNode.dataset.sliding = true;\n    delete carousel.dataset.next;\n    observersOff(carousel);\n    carousel.scrollLeft;\n    carousel.scrollTop;\n    let timeout_function = () => {\n      let index = Array.prototype.indexOf.call(carousel.children, slide);\n      if (isAutoHeight(carousel)) {\n        // Cache computed styles to avoid repeated calls\n        const carouselStyle = getComputedStyle(carousel);\n        let old_height = parseFloat(carouselStyle.height);\n        let new_height;\n        let offset_y = 0;\n        let lastScrollX = carousel.scrollLeft;\n        let lastScrollY = carousel.scrollTop;\n        if (isVertical(carousel)) {\n          let scroll_offset = carousel.scrollTop;\n          slide.style.height = \"auto\";\n          let computed_max_height = carouselStyle.maxHeight;\n          let max_height = computed_max_height.match(/px/)\n            ? Math.ceil(parseFloat(computed_max_height))\n            : MAX_HEIGHT_FALLBACK;\n          // Cache slide computed style\n          const slideStyle = getComputedStyle(slide);\n          new_height = Math.min(\n            Math.ceil(parseFloat(slideStyle.height)),\n            max_height\n          );\n          // new_height = slide.scrollHeight;\n          if (isModal(carousel) || isFullScreen()) {\n            old_height = new_height = carousel.offsetHeight;\n          }\n          slide.style.height = \"\";\n          carousel.scrollTop = scroll_offset;\n          offset_y = index * new_height - carousel.scrollTop;\n        } else {\n          new_height = nextSlideHeight(slide); // ?\n          if (!!lastScrollX) {\n            // Because RTL auto height landing on first slide creates an infinite intersection observer loop\n            scrollTo(carousel, lastScrollX, lastScrollY);\n          }\n        }\n        if (old_height === new_height) {\n          new_height = false;\n        }\n        // interSecObs.unobserve(slide);\n        window.requestAnimationFrame(() => {\n          scrollAnimate(carousel, 0, offset_y, new_height, old_height).then(\n            () => {}\n          );\n        });\n      } else {\n        window.requestAnimationFrame(() => {\n          updateCarousel(carousel);\n        });\n      }\n    };\n    setTimeout(timeout_function, SCROLL_END_TIMEOUT);\n  };\n  const hashNavigation = (e) => {\n    // Hash navigation support\n    const safeHash = sanitizeHash(location.hash);\n    if (safeHash) {\n      let el = document.querySelector(safeHash);\n      let carousel = el?.parentNode;\n      if (\n        !!carousel &&\n        carousel.classList.contains(\"n-carousel__content\") &&\n        !carousel.parentNode.closest(\".n-carousel__content\")\n      ) {\n        // Only query for modal if we might need to close it\n        if (carousel.parentNode.classList.contains(\"n-carousel--overlay\")) ; else {\n          let modal_carousel = document.querySelector(\n            \".n-carousel--overlay > .n-carousel__content\"\n          );\n          if (modal_carousel && modal_carousel !== carousel) {\n            closeModal(modal_carousel);\n          }\n        }\n        if (carousel.parentNode.classList.contains(\"n-carousel--inline\")) {\n          closeModal(carousel);\n        }\n        if (isSafari) {\n          // Safari has already scrolled and needs to rewind it scroll position in order to animate it\n          scrollTo(\n            carousel,\n            carousel.offsetWidth * carousel.dataset.x,\n            carousel.offsetHeight * carousel.dataset.y\n          );\n        }\n        slideTo(carousel, [...carousel.children].indexOf(el));\n        window.nCarouselNav = [carousel, safeHash];\n      }\n    } else {\n      if (window.nCarouselNav) {\n        // Previously navigated to a slide\n        let carousel = window.nCarouselNav[0];\n        delete window.nCarouselNav;\n        if (isSafari) {\n          // Safari has already scrolled and needs to rewind it scroll position in order to animate it\n          scrollTo(\n            carousel,\n            carousel.offsetWidth * carousel.dataset.x,\n            carousel.offsetHeight * carousel.dataset.y\n          );\n        }\n        const firstSlideWithoutId = carousel.querySelector(\":scope > :not([id])\");\n        if (firstSlideWithoutId) {\n          slideTo(\n            carousel,\n            Array.prototype.indexOf.call(carousel.children, firstSlideWithoutId)\n          );\n        }\n      }\n    }\n  };\n  const nextSlideHeight = (el) => {\n    el.style.height = 0;\n    el.style.overflow = \"auto\";\n    const height = el.scrollHeight; // Ceiling when subpixel\n    el.style.height = el.style.overflow = \"\";\n    return height;\n  };\n  const getIndex = (el) => 1 * (isVertical(el) ? el.dataset.y : el.dataset.x);\n  const getIndexReal = (el) => {\n    if (!el || !el.children) {\n      return 0;\n    }\n    let active_slide = el.querySelector(\":scope > [aria-current]\");\n    if (active_slide) {\n      // Use Array.prototype.indexOf for better performance than spread operator\n      return Array.prototype.indexOf.call(el.children, active_slide);\n    } else {\n      const safeHash = sanitizeHash(location.hash);\n      if (safeHash) {\n        const hashSlide = el.querySelector(`:scope > ${safeHash}`);\n        if (hashSlide) {\n          return Array.prototype.indexOf.call(el.children, hashSlide);\n        }\n      }\n      return 0;\n    }\n  };\n  const scrolledAncestor = (el) => {\n    el = el.parentNode;\n    while (el) {\n      if (el.scrollTop !== 0 || el.scrollLeft !== 0) {\n        return el;\n      } else {\n        el = el.parentNode;\n      }\n    }\n    return false;\n  };\n  const scrolledAncestors = (el) => {\n    let arr = [];\n    let a = scrolledAncestor(el);\n    while (\n      a &&\n      typeof a.scrollLeft !== \"undefined\" &&\n      (a.scrollTop !== 0 || a.scrollLeft !== 0)\n    ) {\n      arr.push(a);\n      a = scrolledAncestor(a);\n    }\n    return arr;\n  };\n  const isRTL = (el) => getComputedStyle(el).direction === \"rtl\";\n  const toggleFullScreen = (el) => {\n    el = el.closest(\".n-carousel\");\n    let carousel = el.querySelector(\":scope > .n-carousel__content\");\n    const restoreScroll = () => {\n      if (!isFullScreen()) {\n        el.nuiAncestors.forEach((el) => {\n          window.requestAnimationFrame(() => {\n            el.scrollLeft = el.nuiScrollX;\n            el.scrollTop = el.nuiScrollY;\n            delete el.nuiScrollX;\n            delete el.nuiScrollY;\n          });\n        });\n        delete el.nuiAncestors;\n        el.removeEventListener(\"webkitfullscreenchange\", restoreScroll);\n      }\n    };\n    carousel.togglingFullScreen = true;\n    if (isFullScreen()) {\n      // Exit full screen\n      !!document.exitFullscreen\n        ? document.exitFullscreen()\n        : document.webkitExitFullscreen();\n      if (isSafari) {\n        // When exit finishes, update the carousel because on Safari 14, position is wrong or the slide is invisible\n        setTimeout(() => {\n          el.style.display = \"none\";\n          window.requestAnimationFrame(() => {\n            el.style.display = \"\";\n          });\n        }, 0);\n      }\n      if (isVertical(el) && isAutoHeight(el)) {\n        let updateExitFullScreen = (e) => {\n          setTimeout(() => {\n            let carousel = el.querySelector(\":scope > .n-carousel__content\");\n            slideTo(carousel, parseInt(carousel.dataset.y));\n          }, FULLSCREEN_UPDATE_DELAY);\n          el.removeEventListener(\"fullscreenchange\", updateExitFullScreen);\n        };\n        el.addEventListener(\"fullscreenchange\", updateExitFullScreen);\n      }\n    } else {\n      // Enter full screen\n      if (isSafari) {\n        el.nuiAncestors = scrolledAncestors(el);\n        el.nuiAncestors.forEach((el) => {\n          el.nuiScrollX = el.scrollLeft;\n          el.nuiScrollY = el.scrollTop;\n        });\n        el.addEventListener(\"webkitfullscreenchange\", restoreScroll, false);\n      }\n      !!el.requestFullscreen\n        ? el.requestFullscreen()\n        : el.webkitRequestFullscreen();\n    }\n  };\n  const scrollStartX = (el) => el.scrollLeft; // Get correct start scroll position for LTR and RTL\n  const scrollTo = (el, x, y) => {\n    el.scrollTo(isRTL(el) ? -1 * Math.abs(x) : x, y); // Scroll to correct scroll position for LTR and RTL\n  };\n  const getScroll = (el) =>\n    el === window\n      ? {\n          x: el.scrollX,\n          y: el.scrollY,\n        }\n      : {\n          x: scrollStartX(el),\n          y: el.scrollTop,\n        };\n  let firstFocusableElement = null;\n  let focusableContent = null;\n  let lastFocusableElement = null;\n  const focusHandler = (e) => {\n    let isTabPressed = e.key === \"Tab\" || e.keyCode === 9;\n    if (!isTabPressed) {\n      return;\n    }\n    if (e.shiftKey) {\n      // if shift key pressed for shift + tab combination\n      if (document.activeElement === firstFocusableElement) {\n        lastFocusableElement.focus(); // add focus for the last focusable element\n        e.preventDefault();\n      }\n    } else {\n      // if tab key is pressed\n      if (document.activeElement === lastFocusableElement) {\n        // if focused has reached to last focusable element then focus first focusable element after pressing tab\n        firstFocusableElement.focus(); // add focus for the first focusable element\n        e.preventDefault();\n      }\n    }\n  };\n  const trapFocus = (modal, off = false) => {\n    // FROM: https://uxdesign.cc/how-to-trap-focus-inside-modal-to-make-it-ada-compliant-6a50f9a70700\n    // add all the elements inside modal which you want to make focusable\n    firstFocusableElement = modal.querySelectorAll(focusableElements)[0]; // get first element to be focused inside modal\n    focusableContent = modal.querySelectorAll(focusableElements);\n    lastFocusableElement = focusableContent[focusableContent.length - 1]; // get last element to be focused inside modal\n    if (off) {\n      modal.removeEventListener(\"keydown\", focusHandler);\n    } else {\n      modal.addEventListener(\"keydown\", focusHandler);\n      firstFocusableElement.focus();\n    }\n  };\n  const inOutSine = (n) => (1 - Math.cos(Math.PI * n)) / 2;\n  const paddingX = (el) =>\n    parseInt(getComputedStyle(el).paddingInlineStart) * 2;\n  const paddingY = (el) => parseInt(getComputedStyle(el).paddingBlockStart) * 2;\n  const getControl = (carousel, control) => {\n    let detached_control = document.querySelector(\n      `${control}[data-for=\"${carousel.id}\"]`\n    );\n    if (detached_control) {\n      return detached_control;\n    }\n    for (let el of carousel.children) {\n      if (el.matches(control)) {\n        return el;\n      }\n      if (!el.matches(\".n-carousel__content\") && el.querySelector(control)) {\n        return el.querySelector(control);\n      }\n    }\n  };\n  const closestCarousel = (el) => {\n    if (!el) {\n      return null;\n    }\n    const carouselWrapper = el.closest('[class*=\"n-carousel\"]');\n    if (!carouselWrapper) {\n      return null;\n    }\n    var related_by_id = carouselWrapper.dataset.for;\n    if (!!related_by_id) {\n      const targetElement = document.getElementById(related_by_id);\n      return targetElement\n        ? targetElement.querySelector(\".n-carousel__content\")\n        : null;\n    } else {\n      const nCarousel = el.closest(\".n-carousel\");\n      return nCarousel ? nCarousel.querySelector(\".n-carousel__content\") : null;\n    }\n  };\n  const scrollAnimate = (\n    el,\n    distanceX,\n    distanceY,\n    new_height,\n    old_height = false\n  ) =>\n    new Promise((resolve) => {\n      // Thanks https://stackoverflow.com/posts/46604409/revisions\n      let wrapper = el.closest(\".n-carousel\");\n      if (\n        !!wrapper.nextSlideInstant ||\n        !wrapper.dataset.ready ||\n        window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches ||\n        wrapper.matches(\".n-carousel--instant\")\n      ) {\n        scrollTo(el, getScroll(el).x + distanceX, getScroll(el).y + distanceY);\n        el.style.height = `${new_height}px`;\n        delete wrapper.nextSlideInstant;\n        updateCarousel(el);\n        resolve(el);\n        return;\n      }\n      observersOff(el);\n      let scroll_changing = true;\n      if (distanceX === 0 && distanceY === 0) {\n        scroll_changing = false;\n      }\n      if (!!new_height) {\n        el.style.height = `${old_height}px`;\n        if (isVertical(el) && isAutoHeight(el)) {\n          el.style.setProperty(\"--subpixel-compensation\", 0);\n        }\n      } else {\n        if (!isVertical(el)) {\n          el.style.height = \"\";\n        }\n      }\n      var startx = getScroll(el).x;\n      var starty = getScroll(el).y;\n      var starth = parseInt(el.style.height);\n      var distanceH = new_height - starth;\n      var duration =\n        parseFloat(el.parentNode.dataset.duration) * 1000 || default_duration;\n      var start = null;\n      let startAnim = (timeStamp) => {\n        start = timeStamp;\n        draw(timeStamp);\n      };\n      let draw = (now) => {\n        if (now - start >= duration) {\n          // sliding ends\n          window.requestAnimationFrame(() => {\n            scrollTo(el, startx + distanceX, starty + distanceY);\n            if (new_height) {\n              el.style.height = `${new_height}px`;\n            }\n            updateCarousel(el);\n          });\n          resolve(el);\n          return;\n        }\n        var p = (now - start) / duration;\n        var val = inOutSine(p);\n        var x = startx + distanceX * val;\n        var y = starty + distanceY * val;\n        if (scroll_changing) {\n          scrollTo(el, x, y);\n        }\n        if (new_height) {\n          window.requestAnimationFrame(() => {\n            el.style.height = `${starth + distanceH * val}px`;\n          }); // Timeout because Safari can't do scroll and height at once\n        }\n        requestAnimationFrame(draw);\n      };\n      requestAnimationFrame(startAnim);\n    });\n  const updateCarousel = (el, forced = false) => {\n    // Forced means never skip unnecessary update\n    // Called on init and scroll end\n    if (el.togglingFullScreen) {\n      return;\n    }\n    observersOff(el);\n    let saved_x = el.dataset.x; // On displaced slides and no change\n    let saved_y = el.dataset.y;\n    const firstChild = el.firstElementChild;\n    if (!firstChild) {\n      observersOn(el);\n      return;\n    }\n    el.dataset.x = Math.abs(\n      Math.round(scrollStartX(el) / ceilingWidth(firstChild))\n    );\n    el.dataset.y = Math.abs(\n      Math.round(el.scrollTop / ceilingHeight(firstChild))\n    );\n    // When inline\n    if (el.dataset.x === \"NaN\") {\n      el.dataset.x = 0;\n    }\n    if (el.dataset.y === \"NaN\") {\n      el.dataset.y = 0;\n    }\n    let active_index = getIndex(el);\n    if (active_index >= el.children.length) {\n      active_index = el.children.length - 1;\n    }\n    let old_active_slide = el.querySelector(\":scope > [aria-current]\");\n    let wrapper = el.parentElement;\n    if (!isAutoHeight(wrapper)) {\n      // Dynamic change from auto height to normal\n      el.style.height = \"\";\n    }\n    let active_slide = el.children[active_index];\n    if (!active_slide) {\n      observersOn(el);\n      return;\n    }\n    if (old_active_slide && !forced) {\n      if (active_slide === old_active_slide) {\n        // Scroll snapping back to the same slide. Nothing to do here.\n        el.dataset.x = saved_x;\n        el.dataset.y = saved_y;\n        observersOn(el);\n        return;\n      }\n      old_active_slide.removeAttribute(\"aria-current\");\n      old_active_slide.style.height = \"\";\n      if (!isVertical(el)) {\n        el.style.height = \"\";\n      }\n    }\n    // active_slide.ariaCurrent = true; // Unsupported by FF\n    active_slide.setAttribute(\"aria-current\", true);\n    var active_index_real = (el.dataset.x = el.dataset.y = getIndexReal(el));\n    // Endless carousel\n    const restoreDisplacedSlides = (el) => {\n      el.querySelectorAll(\":scope > [data-first]\").forEach((el2) => {\n        el.append(el.firstElementChild);\n        delete el2.dataset.first;\n        active_index--;\n      });\n      el.querySelectorAll(\":scope > [data-last]\").forEach((el2) => {\n        el.prepend(el.lastElementChild);\n        delete el2.dataset.last;\n        active_index++;\n      });\n    };\n    wrapper.dataset.sliding = true;\n    if (isEndless(el) && !forced) {\n      if (active_index === 0) {\n        if (!active_slide.dataset.first) {\n          // Move the last one to the front as [data-first]\n          if (el.lastElementChild.dataset.last) {\n            delete el.lastElementChild.dataset.last;\n            active_index_real = 1;\n          } else {\n            el.lastElementChild.dataset.first = true;\n          }\n          el.prepend(el.lastElementChild);\n          active_index = 1;\n        } else {\n          // Landed on fake first slide. Move it to the back, remove its [data-first] and move the first one to the back as [data-last]\n          delete el.firstElementChild.dataset.first;\n          el.append(el.firstElementChild);\n          el.firstElementChild.dataset.last = true;\n          el.append(el.firstElementChild);\n          active_index_real = el.children.length - 1;\n          active_index = el.children.length - 2;\n        }\n      } else {\n        if (active_index === el.children.length - 1) {\n          if (!active_slide.dataset.last) {\n            // Move the first one to the back as [data-last]\n            if (el.firstElementChild.dataset.first) {\n              delete el.firstElementChild.dataset.first;\n              active_index_real = el.children.length - 2;\n            } else {\n              el.firstElementChild.dataset.last = true;\n            }\n            el.append(el.firstElementChild);\n            active_index = el.children.length - 2;\n          } else {\n            // Landed on fake last slide. Move it to the front, remove its [data-last] and move the last one to the front as [data-first]\n            delete el.lastElementChild.dataset.last;\n            el.prepend(el.lastElementChild);\n            el.lastElementChild.dataset.first = true;\n            el.prepend(el.lastElementChild);\n            active_index_real = 0;\n            active_index = 1;\n          }\n        } else {\n          // Middle slide\n          restoreDisplacedSlides(el);\n          active_index_real = Math.max(\n            0,\n            Array.prototype.indexOf.call(\n              el.children,\n              el.querySelector(\":scope > [aria-current]\")\n            )\n          ); // Fixes position when sliding to/from first slide; max because of FF returning -1\n        }\n      }\n      const updateScroll = () => {\n        el.dataset.x = el.dataset.y = active_index_real;\n        let scroll_x = ceilingWidth(el.firstElementChild) * active_index;\n        let scroll_y = ceilingHeight(el.firstElementChild) * active_index;\n        el.scroll_x = scroll_x;\n        el.scroll_y = scroll_y;\n        scrollTo(el, scroll_x, scroll_y); // First element size, because when Peeking, it differs from carousel size\n        delete el.scroll_x;\n        delete el.scroll_y;\n      };\n      if (isVertical(el) && isAutoHeight(el)) {\n        window.requestAnimationFrame(() => {\n          // Causes blinking, but needed for vertical auto height endless\n          updateScroll();\n        });\n      } else {\n        updateScroll();\n      }\n    } else {\n      // Check and restore dynamically disabled endless option\n      restoreDisplacedSlides(el);\n      active_index_real = Math.max(\n        0,\n        Array.prototype.indexOf.call(\n          el.children,\n          el.querySelector(\":scope > [aria-current]\")\n        )\n      ); // Fixes position when sliding to/from first slide; max because of FF returning -1\n    }\n    active_slide.style.height = \"\";\n    wrapper.style.setProperty(\n      \"--height\",\n      `${\n        isAutoHeight(el)\n          ? nextSlideHeight(active_slide)\n          : active_slide.scrollHeight\n      }px`\n    );\n    window.requestAnimationFrame(() => {\n      if (!el.parentNode.dataset.ready && isAutoHeight(el) && isVertical(el)) {\n        el.style.height = `${\n          parseFloat(getComputedStyle(el).height) - paddingY(el)\n        }px`;\n      }\n    });\n    // Sliding to a slide with a hash? Update the URI\n    if (getComputedStyle(el).visibility !== \"hidden\") {\n      let previously_active = document.activeElement;\n      let hash = active_slide.id;\n      // Sanitize hash before setting to prevent XSS\n      const safeHash = hash ? sanitizeHash(`#${hash}`) : null;\n      if (\n        !!el.parentNode.dataset.ready &&\n        safeHash &&\n        !el.parentNode.closest(\".n-carousel__content\")\n      ) {\n        // Hash works only with top-level carousel\n        location.hash = safeHash;\n      }\n      if (\n        !!el.parentNode.dataset.ready &&\n        !safeHash &&\n        !el.parentNode.closest(\".n-carousel__content\") &&\n        window.nCarouselNav\n      ) {\n        // Hash works only with top-level carousel\n        location.hash = \"\";\n      }\n      previously_active.focus();\n    }\n    // Fix buttons\n    let index = getControl(el.closest(\".n-carousel\"), \".n-carousel__index\");\n    if (!!index) {\n      index.querySelector(\"[aria-current]\")?.removeAttribute(\"aria-current\");\n      // index.children[active_index_real].ariaCurrent = true; // Unsupported by FF\n      indexControls(index)[active_index_real].setAttribute(\n        \"aria-current\",\n        true\n      );\n    }\n    // Disable focus on children of non-active slides\n    // Active slides of nested carousels should also have disabled focus\n    [...el.children].forEach((el) => {\n      // Native \"inert\" attribute to replace the below \"focusDisabled\" loops from June 2022.\n      el.inert = el === active_slide ? false : true;\n      if (isSafari && el.querySelector(\".n-carousel:-webkit-full-screen\")) {\n        // Safari full screen bug: parent scroll resets to 0, first slide becomes active and the full screen child lightbox is inside an inert parent\n        let current = el.parentNode.querySelector(\n          ':scope > [aria-current=\"true\"]'\n        );\n        current.inert = true;\n        current.removeAttribute(\"aria-current\");\n        el.inert = false;\n        el.setAttribute(\"aria-current\", true);\n      }\n    });\n    // Note: Focus management is handled by the native \"inert\" attribute\n    // Previous manual focus disabling code has been removed (obsoleted June 2022)\n    if (/--vertical.*--auto-height/.test(wrapper.classList)) {\n      // Undo jump to wrong slide when sliding to the last one\n      el.scrollTop = el.offsetHeight * active_index_real;\n    }\n    window.requestAnimationFrame(() => {\n      observersOn(el);\n    });\n  };\n  const slide = (el, offsetX = 0, offsetY = 0, index) => {\n    clearTimeout(el.nCarouselTimeout);\n    if (!el.parentNode.dataset.sliding) {\n      el.parentNode.dataset.sliding = true;\n      let old_height = el.children[getIndexReal(el)].offsetHeight;\n      let new_height = old_height;\n      if (isAutoHeight(el)) {\n        let old_scroll_left = scrollStartX(el);\n        let old_scroll_top = el.scrollTop;\n        let slide = el.children[index];\n        if (isVertical(el)) {\n          slide.style.height = \"auto\";\n          // Cache computed styles\n          const elStyle = getComputedStyle(el);\n          const slideStyle = getComputedStyle(slide);\n          let computed_max_height = elStyle.maxHeight;\n          let max_height = computed_max_height.match(/px/)\n            ? Math.ceil(parseFloat(computed_max_height))\n            : MAX_HEIGHT_FALLBACK;\n          new_height = Math.min(\n            Math.ceil(parseFloat(slideStyle.height)),\n            max_height\n          );\n          // new_height = slide.scrollHeight;\n          slide.style.height = \"\";\n        } else {\n          new_height = nextSlideHeight(slide);\n          let old_height =\n            getIndexReal(el) === index\n              ? new_height\n              : nextSlideHeight(el.children[getIndexReal(el)]);\n          el.parentNode.style.setProperty(\"--height\", `${old_height}px`);\n        }\n        scrollTo(el, old_scroll_left + paddingX(el) / 2, old_scroll_top); // iPad bug\n        scrollTo(el, old_scroll_left, old_scroll_top);\n      }\n      if (isVertical(el)) {\n        if ((isModal(el) || isFullScreen()) && isAutoHeight(el)) {\n          old_height = new_height = el.offsetHeight;\n        }\n        offsetY = offsetY - index * old_height + index * new_height;\n      }\n      window.requestAnimationFrame(() => {\n        if (!el.parentNode.dataset.duration && !isAutoHeight(el)) {\n          // Unspecified duration, no height change – using native smooth scroll\n          delete el.parentNode.dataset.sliding;\n          el.dataset.next = index;\n          el.scrollTo({\n            top: el.scrollTop + offsetY,\n            left: el.scrollLeft + offsetX,\n            behavior: window.matchMedia(\"(prefers-reduced-motion: reduce)\")\n              .matches\n              ? \"auto\"\n              : \"smooth\",\n          });\n        } else {\n          scrollAnimate(\n            el,\n            offsetX,\n            offsetY,\n            new_height === old_height ? false : new_height,\n            old_height\n          ); // Vertical version will need ceiling value\n        }\n      });\n    }\n  };\n  const slideNext = (el) => {\n    if (!el || !el.children || el.children.length === 0) {\n      console.warn(\"Invalid element in slideNext\");\n      return;\n    }\n    let index = getIndexReal(el);\n    slideTo(el, index >= el.children.length - 1 ? 0 : index + 1);\n  };\n  const slidePrevious = (el) => {\n    if (!el || !el.children || el.children.length === 0) {\n      console.warn(\"Invalid element in slidePrevious\");\n      return;\n    }\n    let index = getIndexReal(el);\n    slideTo(el, index === 0 ? el.children.length - 1 : index - 1);\n  };\n  const slideTo = (el, index) => {\n    if (!el || !el.children || !el.children[index]) {\n      console.warn(\"Invalid element or index in slideTo\");\n      return;\n    }\n\n    if (isVertical(el)) {\n      slide(\n        el,\n        0,\n        ceilingHeight(el.children[index]) * index - el.scrollTop,\n        index\n      );\n    } else {\n      const targetElement = el.children[index];\n      if (!targetElement || !targetElement.offsetParent) {\n        console.warn(\"Target element not ready for measurement\");\n        return;\n      }\n\n      let width = Math.ceil(parseFloat(getComputedStyle(targetElement).width));\n      let new_offset = isRTL(el)\n        ? Math.abs(scrollStartX(el)) - width * index\n        : width * index - scrollStartX(el);\n      slide(el, new_offset, 0, index);\n    }\n  };\n  const carouselKeys = (e) => {\n    let keys = [\n      \"ArrowLeft\",\n      \"ArrowRight\",\n      \"ArrowUp\",\n      \"ArrowDown\",\n      \"PageUp\",\n      \"PageDown\",\n      \"Home\",\n      \"End\",\n    ];\n    const carousel = e.target.closest(\".n-carousel\");\n    if (!carousel) {\n      return;\n    }\n    let el = carousel.querySelector(\":scope > .n-carousel__content\");\n    if (!el) {\n      return;\n    }\n    if (keys.includes(e.key)) {\n      // Capture relevant keys\n      // e.preventDefault();\n      switch (e.key) {\n        case \"ArrowLeft\": {\n          isRTL(el) ? slideNext(el) : slidePrevious(el);\n          break;\n        }\n        case \"ArrowRight\": {\n          isRTL(el) ? slidePrevious(el) : slideNext(el);\n          break;\n        }\n        case \"ArrowUp\":\n        case \"PageUp\": {\n          slidePrevious(el);\n          break;\n        }\n        case \"ArrowDown\":\n        case \"PageDown\": {\n          slideNext(el);\n          break;\n        }\n        case \"Home\": {\n          slideTo(el, 0);\n          break;\n        }\n        case \"End\": {\n          slideTo(el, el.children.length - 1);\n          break;\n        }\n      }\n    }\n  };\n  const slidePreviousEvent = (e) => {\n    const carousel = closestCarousel(e.target.closest('[class*=\"n-carousel\"]'));\n    if (carousel) {\n      slidePrevious(carousel);\n    }\n  };\n  const slideNextEvent = (e) => {\n    const carousel = closestCarousel(e.target.closest('[class*=\"n-carousel\"]'));\n    if (carousel) {\n      slideNext(carousel);\n    }\n  };\n  const slideIndexEvent = (e) => {\n    let el = e.target.closest(\"a, button\");\n    if (el && !(el.href && (e.ctrlKey || e.metaKey))) {\n      const wrapper =\n        document.querySelector(`.n-carousel#${el.parentNode.dataset.for}`) ||\n        el.closest(\".n-carousel\");\n      const carousel = wrapper.querySelector(\":scope > .n-carousel__content\");\n      let new_index = [...indexControls(el.parentNode)].indexOf(el);\n      if (isEndless(carousel)) {\n        var old_index = getIndex(carousel);\n        if (old_index === 0) {\n          if (new_index === carousel.children.length - 1) {\n            new_index = 0;\n          } else {\n            new_index++;\n          }\n        }\n        if (old_index === carousel.children.length - 1) {\n          if (new_index === 0) {\n            new_index = carousel.children.length - 1;\n          } else {\n            new_index--;\n          }\n        }\n      }\n      if (\n        wrapper.classList.contains(\"n-carousel--inline\") &&\n        !isModal(carousel)\n      ) {\n        // Opening an inline carousel\n        wrapper.nextSlideInstant = true;\n        openModal(carousel);\n        // Set new x, y\n        window.requestAnimationFrame(() => {\n          carousel.dataset.x = carousel.dataset.y = new_index;\n          scrollTo(\n            carousel,\n            carousel.offsetWidth * carousel.dataset.x,\n            carousel.offsetHeight * carousel.dataset.y\n          );\n          document.body.dataset.frozen = document.body.scrollTop;\n          updateCarousel(carousel);\n        });\n      } else {\n        window.requestAnimationFrame(() => {\n          slideTo(carousel, new_index);\n        });\n      }\n      return false;\n    }\n  };\n  const closeModalOnBodyClick = (e) => {\n    let overlay = document.querySelector(\".n-carousel--overlay\");\n    if (overlay && e.key === \"Escape\") {\n      closeModal(overlay);\n    }\n  };\n  const closeModal = (el) => {\n    if (isFullScreen()) {\n      !!document.exitFullscreen\n        ? document.exitFullscreen()\n        : document.webkitExitFullscreen();\n    }\n    let carousel = closestCarousel(el);\n    if (carousel) {\n      let wrapper = carousel.closest(\".n-carousel\");\n      wrapper.toggleModal = true; // skip mutation observer\n      wrapper.classList.remove(\"n-carousel--overlay\");\n      trapFocus(wrapper, true); // Disable focus trap\n      if (\n        wrapper.nextElementSibling &&\n        wrapper.nextElementSibling.classList.contains(\n          \"n-carousel__overlay-placeholder\"\n        )\n      ) {\n        wrapper.nextElementSibling.remove();\n      }\n      delete document.body.dataset.frozen;\n    }\n    document.body.removeEventListener(\"keyup\", closeModalOnBodyClick);\n  };\n  const openModal = (el) => {\n    let carousel = closestCarousel(el);\n    if (carousel) {\n      let wrapper = carousel.closest(\".n-carousel\");\n      wrapper.toggleModal = true; // skip mutation observer\n      wrapper.insertAdjacentHTML(\n        \"afterend\",\n        `<div class=n-carousel__overlay-placeholder style=\"aspect-ratio: ${\n          wrapper.getBoundingClientRect().width /\n          wrapper.getBoundingClientRect().height\n        }\"></div>`\n      );\n      wrapper.classList.add(\"n-carousel--overlay\");\n      trapFocus(wrapper);\n      setTimeout(() => {\n        document.body.addEventListener(\"keyup\", closeModalOnBodyClick);\n      }, FULLSCREEN_UPDATE_DELAY);\n    }\n  };\n  const autoHeightObserver = new ResizeObserver((entries) => {\n    window.requestAnimationFrame(() => {\n      entries.forEach((e) => {\n        let slide = e.target.querySelector(\":scope > [aria-current]\");\n        let el = slide.closest(\".n-carousel__content\");\n        if (!el.parentElement.dataset.sliding) {\n          el.parentNode.style.removeProperty(\"--height\");\n          if (isVertical(el)) {\n            slide.style.height = \"auto\";\n            el.style.height = `${slide.scrollHeight}px`;\n            slide.style.height = \"\";\n            updateCarousel(el);\n          } else {\n            el.style.height = \"\";\n            el.style.height = `${slide.scrollHeight}px`;\n            updateCarousel(el, true);\n          }\n        }\n      });\n    });\n  });\n  const updateSubpixels = (el) => {\n    if (!el.parentNode.dataset.sliding) {\n      // Round down the padding, because sub pixel padding + scrolling is a problem\n      let carousel = el;\n      carousel.style.padding = \"\"; // Subpixel peeking fix\n      carousel.style.removeProperty(\"--peek-int\");\n      // Cache computed style to avoid multiple calls\n      const carouselStyle = getComputedStyle(carousel);\n      const paddingBlockStart = parseInt(carouselStyle.paddingBlockStart);\n      const paddingInlineStart = parseInt(carouselStyle.paddingInlineStart);\n      carousel.style.padding = isVertical(carousel)\n        ? `${paddingBlockStart}px 0`\n        : `0 ${paddingInlineStart}px`;\n      if (carousel.style.padding === \"0px\") {\n        carousel.style.padding = \"\";\n      } else {\n        // For Safari, which doesn't support inline end padding in a scrollable container\n        carousel.style.setProperty(\n          \"--peek-int\",\n          isVertical(carousel)\n            ? `${paddingBlockStart}px 0 0 0`\n            : `0 ${paddingInlineStart}px 0 0`\n        );\n      }\n      window.requestAnimationFrame(() => {\n        const rect = carousel.getBoundingClientRect();\n        if (isVertical(el)) {\n          carousel.style.setProperty(\n            \"--subpixel-compensation\",\n            Math.ceil(rect.height) - rect.height\n          );\n        } else {\n          carousel.style.setProperty(\n            \"--subpixel-compensation\",\n            Math.ceil(rect.width) - rect.width\n          );\n        }\n        let offset = getIndexReal(carousel); // Real offset including displaced first/last slides\n        scrollTo(\n          carousel,\n          offset * ceilingWidth(carousel.firstElementChild),\n          offset * ceilingHeight(carousel.firstElementChild)\n        );\n      });\n    }\n  };\n  const observersOn = (el) => {\n    window.requestAnimationFrame(() => {\n      if (el.scroll_x && el.scroll_y) {\n        scrollTo(el, el.scroll_x, el.scroll_y);\n      }\n      if (\n        el.parentNode.matches(\n          \".n-carousel--vertical.n-carousel--controls-outside.n-carousel--auto-height\"\n        )\n      ) {\n        height_minus_index.observe(el.parentNode);\n      } else {\n        height_minus_index.unobserve(el.parentNode);\n      }\n      subpixel_observer.observe(el);\n      mutation_observer.observe(el.parentNode, {\n        attributes: true,\n        attributeFilter: [\"class\"],\n      });\n      el.addEventListener(\"scrollend\", scrollEndAction);\n      // setTimeout(() => {\n      delete el.parentNode.dataset.sliding;\n      // }, 50); // Because intersection observer fires again\n      if (!(\"onscrollend\" in window) && isEndless(el)) {\n        // Fix for browsers without scrollend event (Safari) losing parts of the edge slide\n        scrollTo(\n          el,\n          el.offsetWidth * getIndexReal(el),\n          el.offsetHeight * getIndexReal(el)\n        );\n      }\n    });\n  };\n  const observersOff = (el) => {\n    height_minus_index.unobserve(el.parentNode);\n    subpixel_observer.unobserve(el);\n    el.observerStarted = true;\n    el.removeEventListener(\"scrollend\", scrollEndAction);\n  };\n  const updateObserver = (el) => {\n    observersOff(el);\n    const doUpdate = (el) => {\n      updateSubpixels(el);\n      window.requestAnimationFrame(() => {\n        const activeSlide = el.querySelector(\":scope > [aria-current]\");\n        if (activeSlide) {\n          let current_height = activeSlide.scrollHeight + \"px\";\n          let previous_height = getComputedStyle(el).getPropertyValue(\"--height\");\n          if (current_height !== previous_height) {\n            el.parentNode.style.setProperty(\"--height\", current_height);\n          }\n        }\n        observersOn(el);\n      });\n    };\n    doUpdate(el);\n    el.querySelectorAll(\".n-carousel__content\").forEach((el) => doUpdate(el));\n  };\n  const subpixel_observer = new ResizeObserver((entries) => {\n    window.requestAnimationFrame(() => {\n      entries.forEach((e) => {\n        let el = e.target;\n        if (el.observerStarted) {\n          el.observerStarted = false;\n          return;\n        }\n        updateObserver(el);\n      });\n    });\n  });\n  const mutation_observer = new MutationObserver((mutations) => {\n    for (let mutation of mutations) {\n      if (\n        mutation.target &&\n        !mutation.target.nextSlideInstant &&\n        !mutation.target.toggleModal\n      ) {\n        // Early return if target is not a carousel wrapper\n        if (!mutation.target.classList || !mutation.target.classList.contains(\"n-carousel\")) {\n          continue;\n        }\n        let carousel = mutation.target.querySelector(\n          \":scope > .n-carousel__content\"\n        );\n        if (carousel) {\n          updateObserver(carousel);\n          updateCarousel(carousel, true);\n        }\n        delete mutation.target.toggleModal;\n      }\n    }\n  });\n  const setIndexWidth = (el) => {\n    let index = el.querySelector(\":scope > .n-carousel__index\");\n    if (index && !el.dataset.sliding) {\n      el.style.removeProperty(\"--height-minus-index\");\n      index.style.position = \"absolute\";\n      el.style.setProperty(\"--height-minus-index\", `${el.offsetHeight}px`);\n      // Cache computed style instead of querying again\n      const indexStyle = getComputedStyle(index);\n      el.style.setProperty(\"--index-width\", indexStyle.width);\n      index.style.position = \"\";\n    }\n  };\n  const height_minus_index = new ResizeObserver((entries) => {\n    // Limit outside index height to carousel height\n    window.requestAnimationFrame(() => {\n      // Observing the carousel wrapper\n      entries.forEach((e) => {\n        let el = e.target;\n        setIndexWidth(el);\n      });\n    });\n  });\n  const init = (host = document) => {\n    host.querySelectorAll(\".n-carousel:not([data-ready])\").forEach((el) => {\n      const previous = getControl(el, \".n-carousel__previous\");\n      const next = getControl(el, \".n-carousel__next\");\n      const index = getControl(el, \".n-carousel__index\");\n      const close_modal = getControl(el, \".n-carousel__close\");\n      const full_screen = getControl(el, \".n-carousel__full-screen\");\n      const content = el.querySelector(\":scope > .n-carousel__content\");\n      if (!content) {\n        return;\n      }\n      if (!!previous) {\n        previous.onclick = slidePreviousEvent;\n      }\n      if (!!next) {\n        next.onclick = slideNextEvent;\n      }\n      if (!!index) {\n        index.onclick = slideIndexEvent;\n      }\n      if (!!close_modal) {\n        close_modal.onclick = (e) => {\n          if (\n            e.target\n              .closest(\".n-carousel\")\n              .classList.contains(\"n-carousel--overlay\")\n          ) {\n            closeModal(e.target);\n          } else {\n            openModal(e.target);\n          }\n        };\n      }\n      if (!!full_screen) {\n        full_screen.onclick = (e) => {\n          let carousel = e.target\n            .closest(\".n-carousel\")\n            .querySelector(\":scope > .n-carousel__content\");\n          carousel.dataset.xx = carousel.dataset.x;\n          carousel.dataset.yy = carousel.dataset.y;\n          toggleFullScreen(e.target);\n        };\n        const fullScreenEvent = (e) => {\n          let carousel = e.target.querySelector(\n            \":scope > .n-carousel__content\"\n          );\n          window.requestAnimationFrame(() => {\n            carousel.dataset.x = carousel.dataset.xx || carousel.dataset.x;\n            carousel.dataset.y = carousel.dataset.yy || carousel.dataset.y;\n            delete carousel.dataset.xx;\n            delete carousel.dataset.yy;\n            if (\n              carousel.dataset.x !== \"undefined\" &&\n              carousel.dataset.y !== \"undefined\"\n            ) {\n              scrollTo(\n                carousel,\n                getIndexReal(carousel) *\n                  ceilingWidth(carousel.children[getIndexReal(carousel)]),\n                getIndexReal(carousel) *\n                  ceilingHeight(carousel.children[getIndexReal(carousel)])\n              );\n            }\n            delete carousel.togglingFullScreen;\n            updateCarousel(carousel);\n          });\n        };\n        if (isSafari) {\n          el.onwebkitfullscreenchange = fullScreenEvent;\n        } else {\n          el.onfullscreenchange = fullScreenEvent;\n        }\n      }\n      el.addEventListener(\"keydown\", carouselKeys);\n      el.addEventListener(\"keyup\", (e) => {\n        if (e.key === \"Escape\") {\n          let el = e.target;\n          if (!el.closest(\".n-carousel--overlay\")) {\n            el = document.querySelector(\".n-carousel--overlay\");\n          }\n          if (el) {\n            closeModal(el);\n          }\n        }\n      });\n      updateSubpixels(content);\n      content.observerStarted = true;\n      const safeHash = sanitizeHash(location.hash);\n      let hashed_slide = safeHash\n        ? content.querySelector(\":scope > \" + safeHash)\n        : false;\n      if (hashed_slide) {\n        if (el.classList.contains(\"n-carousel--inline\")) {\n          openModal(content);\n        }\n        let index = [...hashed_slide.parentNode.children].indexOf(hashed_slide);\n        if (isVertical(content)) {\n          content.dataset.y = index;\n        } else {\n          content.dataset.x = index;\n        }\n        window.nCarouselNav = [content, safeHash];\n      }\n      if (el.matches(\".n-carousel--vertical.n-carousel--auto-height\")) {\n        content.style.height = \"\";\n        content.style.height = getComputedStyle(content).height;\n        el.dataset.ready = true;\n        content.scrollTop = 0; // Should be a different value if the initial active slide is other than the first one (unless updateCarousel() takes care of it)\n      }\n      if (isAutoHeight(el)) {\n        // Auto has a specified height which needs update on resize\n        autoHeightObserver.observe(content);\n      }\n      window.requestAnimationFrame(() => {\n        observersOn(content);\n        if (\n          el.parentNode.matches(\n            \".n-carousel--vertical.n-carousel--controls-outside.n-carousel--auto-height\"\n          )\n        ) {\n          setIndexWidth(el);\n        }\n        updateCarousel(content);\n        el.dataset.ready = true;\n        if (el.matches(\".n-carousel--auto-slide\")) {\n          let auto_delay =\n            (parseFloat(el.dataset.interval) * 1000 || default_interval) +\n            (parseFloat(el.dataset.duration) * 1000 || default_duration);\n          let carouselTimeout = () => {\n            if (isElementInViewport(content)) {\n              slideNext(content);\n            }\n            content.nCarouselTimeout = setTimeout(carouselTimeout, auto_delay);\n          };\n          content.nCarouselTimeout = setTimeout(\n            carouselTimeout,\n            parseFloat(el.dataset.interval) * 1000 || default_interval\n          );\n          content.addEventListener(\"pointerenter\", (e) =>\n            clearTimeout(e.target.nCarouselTimeout)\n          );\n        }\n        el.dataset.platform = navigator.platform; // iPhone doesn't support full screen, Windows scroll works differently\n      });\n      content.nCarouselUpdate = updateCarousel;\n      // Note: scrollend event is provided by scrollyfills polyfill\n      if (el.matches(\".n-carousel--lightbox\")) {\n        let loaded = (img) => {\n          img.closest(\"picture\").dataset.loaded = true;\n        };\n        content.querySelectorAll(\"picture img\").forEach((el) => {\n          if (el.complete) {\n            loaded(el);\n          } else {\n            el.addEventListener(\"load\", (e) => {\n              loaded(e.target);\n            });\n          }\n        });\n      }\n    });\n  };\n  window.nCarouselInit = init;\n  window.addEventListener(\"popstate\", hashNavigation);\n  const doInit = () => {\n    typeof nui !== \"undefined\" && typeof nui.registerComponent === \"function\"\n      ? nui.registerComponent(\"n-carousel\", init)\n      : init();\n  };\n  if (document.readyState !== \"loading\") {\n    doInit();\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", doInit);\n  }\n})();\n"],"mappings":"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","ignoreList":[]}