let e=e=>e===window?{x:e.scrollX,y:e.scrollY}:{x:e.scrollLeft,y:e.scrollTop},t=e=>{"function"==typeof ResizeObserver?m.observe(e):window.addEventListener("resize",v),console.log("observersOn",e.scrollLeft,e.scrollTop);e.scrollLeft,e.scrollTop;delete e.dataset.sliding,e.addEventListener("scroll",u)},s=e=>{"function"==typeof ResizeObserver?m.unobserve(e):window.removeEventListener("resize",v),e.removeEventListener("scroll",u)},l=(t,s,l,o)=>(console.log("Srolling by",l," from ",t.scrollTop),new Promise(function(r,n){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return t.scrollTo(e(t).x+s,e(t).y+l),void(t.style.height=`${o}px`);var a=e(t).x,i=e(t).y,c=parseInt(t.style.height),d=.5*(a+(a+s)),h=.5*(i+(i+l)),u=.5*(c+o),f=a-d,g=i-h,y=c-u,p=performance.now();window.requestAnimationFrame(function e(){var s=(performance.now()-p)/2e3;s>1&&(s=1),t.scrollTo(d+f*Math.cos(s*Math.PI),h+g*Math.cos(s*Math.PI)),o&&window.requestAnimationFrame(()=>{t.style.height=`${u+y*Math.cos(s*Math.PI)}px`}),s<1?window.requestAnimationFrame(e):(console.log("Height after animation:",t.style.height),r(t))})})),o=e=>2*parseInt(getComputedStyle(e).paddingInlineStart),r=e=>2*parseInt(getComputedStyle(e).paddingBlockStart),n=(e,t)=>{for(let s of e.children){if(s.matches(t))return s;if(!s.matches(".n-carousel--content")&&s.querySelector(t))return s.querySelector(t)}return!1},a=e=>{s(e),e.dataset.x=Math.round(e.scrollLeft/(e.offsetWidth-o(e))),e.dataset.y=Math.round(e.scrollTop/(e.offsetHeight-r(e)));let l=e.classList.contains("n-carousel__vertical")?e.dataset.y:e.dataset.x;l>=e.children.length&&(l=e.children.length-1);let a=e.querySelector(":scope > [data-active]");if(a){if(e.children[l]===a)return void t(e);delete a.dataset.active,a.style.height=""}!e.parentNode.dataset.ready&&e.classList.contains("n-carousel__auto")&&(e.style.height=`${e.offsetHeight-r(e)}px`),e.children[l].dataset.active=!0,e.children[l].style.height="";let i=e.closest(".n-carousel"),c=n(i,".n-carousel--index");c.querySelector("[disabled]")&&(c.querySelector("[disabled]").disabled=!1),c.children[l].disabled=!0,n(i,".n-carousel--previous").disabled="0"===l,n(i,".n-carousel--next").disabled=l>=e.children.length-1,setTimeout(()=>{t(e)},66)};var i,c,d,h;let u=e=>{let t=e.target;t.dataset.sliding||(clearTimeout(i),c=t.scrollLeft,d=t.scrollTop,i=setTimeout(function(){if(c===t.scrollLeft&&d===t.scrollTop&&t.scrollLeft%(t.offsetWidth-o(t))==0&&t.scrollTop%(t.offsetHeight-r(t))==0)if(console.log("Scrolling has stopped.",t,e.target.scrollLeft,c,t.scrollTop,d),s(t),t.classList.contains("n-carousel__auto")){if(t.dataset.sliding=!0,t.classList.contains("n-carousel__vertical")){let e=Math.round(t.scrollTop/(t.offsetHeight-r(t)));t.children[e].style.height="auto";var n=t.children[e].scrollHeight;t.children[e].style.height="";var i=e*n-t.scrollTop}else{let e=Math.round(t.scrollLeft/(t.offsetWidth-o(t)));t.children[e].style.height="auto",t.children[e].style.position="absolute";n=t.children[e].scrollHeight;t.children[e].style.position=t.children[e].style.height="",t.scrollTo(c,d);i=0}l(t,0,i,n).then(e=>{setTimeout(()=>{a(t),delete t.dataset.sliding},66)})}else a(t)},66))},f=(e,t,r,n)=>{if(s(e),!e.dataset.sliding){e.removeEventListener("scroll",u),e.dataset.sliding=!0;let s=e.children[e.dataset.y].clientHeight,r=s;if(e.classList.contains("n-carousel__auto")){let t=e.scrollLeft,s=e.scrollTop;e.classList.contains("n-carousel__vertical")?e.children[n].style.height="auto":(e.children[n].style.position="absolute",e.children[n].style.width=`${e.offsetWidth-o(e)}px`),r=e.children[n].scrollHeight,e.children[n].style.position=e.children[n].style.width=e.children[n].style.height="",e.scrollTo(t+o(e)/2,s),e.scrollTo(t,s)}let i=-1*(e.dataset.y*s-n*r);l(e,t,i,r!==s&&r).then(t=>{a(e)})}},g=e=>{e.classList.contains("n-carousel__vertical")?f(e,0,(e.offsetHeight,r(e)),e.dataset.y>=e.children.length-1?0:parseInt(e.dataset.y)+1):f(e,e.offsetWidth-o(e),0,e.dataset.x>=e.children.length-1?0:parseInt(e.dataset.x)+1)},y=e=>{e.classList.contains("n-carousel__vertical")?f(e,0,(e.offsetHeight,r(e)),0===parseInt(e.dataset.y)?e.children.length-1:parseInt(e.dataset.y)-1):f(e,-1*(e.offsetWidth-o(e)),0,0===parseInt(e.dataset.x)?e.children.length-1:parseInt(e.dataset.x)-1)},p=(e,t)=>{e.classList.contains("n-carousel__vertical")?f(e,0,(e.offsetHeight,r(e),e.scrollTop),t):f(e,(e.offsetWidth-o(e))*t-e.scrollLeft,0,t)},v=e=>{document.querySelectorAll(".n-carousel--content").forEach(t=>{clearTimeout(h),h=setTimeout(function(){t.scrollTo(t.offsetWidth*t.dataset.x-o(t),t.offsetHeight*t.dataset.y+r(t)),console.log("Resizing has stopped.",e.target)},66)})};if("function"==typeof ResizeObserver)var m=new ResizeObserver(e=>{e.forEach(e=>{e.target})});let w=e=>{let t=e.target;if(t.classList.contains("n-carousel--content")&&["ArrowLeft","ArrowRight","Home","End"].includes(e.key))switch(e.preventDefault(),e.key){case"ArrowLeft":y(t);break;case"ArrowRight":g(t);break;case"ArrowUp":y(t);break;case"ArrowDown":g(t);break;case"Home":p(t,0);break;case"End":p(t,t.children.length-1)}},L=e=>e.closest(".n-carousel").querySelector(".n-carousel--content"),T=e=>{y(L(e.target))},b=e=>{g(L(e.target))},x=e=>{let t=e.target;"BUTTON"===t.tagName&&p(L(t),[...t.parentNode.children].indexOf(t))},S=e=>{let s=e.target;n(s,"[data-active]").style.height="",getComputedStyle(s),window.requestAnimationFrame(()=>{setTimeout(()=>{t(s)},66)})};document.querySelectorAll(".n-carousel:not([data-ready])").forEach(e=>{n(e,".n-carousel--previous").onclick=T,n(e,".n-carousel--next").onclick=b,n(e,".n-carousel--index").onclick=x,e.querySelector(".n-carousel--content").onkeydown=w;let s=e.querySelector(":scope > .n-carousel--content");s.tabIndex=0,a(s),s.addEventListener("transitionend",S),e.dataset.ready=!0,t(e),e.querySelector(".n-carousel--content").addEventListener("scroll",u)})