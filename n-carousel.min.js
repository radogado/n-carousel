let e=e=>e===window?{x:e.scrollX,y:e.scrollY}:{x:e.scrollLeft,y:e.scrollTop},t=e=>e.closest(".n-carousel").classList.contains("n-carousel__vertical"),l=e=>{setTimeout(()=>{delete e.dataset.sliding,e.addEventListener("scroll",u)},1)},s=e=>{e.removeEventListener("scroll",u)},o=(t,l,s,o)=>new Promise((r,i)=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return t.scrollTo(e(t).x+l,e(t).y+s),t.style.height=`${o}px`,void r(t);var a=!1,n=e(t).x,c=e(t).y,d=parseInt(t.style.height),h=o-d,u=null;let f=e=>{if(a)r(t);else{e-u>=500&&(a=!0);var i=(e=>(1-Math.cos(Math.PI*e))/2)((e-u)/500),g=n+l*i,y=c+s*i;t.scrollTo(g,y),o&&window.requestAnimationFrame(()=>{t.style.height=`${d+h*i}px`}),requestAnimationFrame(f)}};requestAnimationFrame(e=>{(u=e)+500,f(e)})}),r=e=>2*parseInt(getComputedStyle(e).paddingInlineStart),i=e=>2*parseInt(getComputedStyle(e).paddingBlockStart),a=(e,t)=>{for(let l of e.children){if(l.matches(t))return l;if(!l.matches(".n-carousel--content")&&l.querySelector(t))return l.querySelector(t)}},n=e=>{s(e),e.dataset.x=Math.round(e.scrollLeft/(e.offsetWidth-r(e))),e.dataset.y=Math.round(e.scrollTop/(e.offsetHeight-i(e)));let o=t(e)?e.dataset.y:e.dataset.x;o>=e.children.length&&(o=e.children.length-1);let n=e.querySelector(":scope > [data-active]");if(n){if(e.children[o]===n)return void l(e);delete n.dataset.active,n.style.height=""}!e.parentNode.dataset.ready&&e.classList.contains("n-carousel__auto")&&window.requestAnimationFrame(()=>{e.style.height=`${e.offsetHeight-i(e)}px`}),e.children[o].dataset.active=!0,e.children[o].style.height="";let c=e.closest(".n-carousel"),d=a(c,".n-carousel--index");d.querySelector("[disabled]")&&(d.querySelector("[disabled]").disabled=!1),d.children[o].disabled=!0,a(c,".n-carousel--previous button").disabled="0"===o,a(c,".n-carousel--next button").disabled=o>=e.children.length-1,l(e)};var c,d,h;let u=e=>{let l=e.target;l.dataset.sliding||(clearTimeout(c),d=l.scrollLeft,h=l.scrollTop,c=setTimeout(function(){if(d===l.scrollLeft&&h===l.scrollTop&&l.scrollLeft%(l.offsetWidth-r(l))==0&&l.scrollTop%(l.offsetHeight-i(l))==0)if(console.log("Scrolling has stopped.",l,e.target.scrollLeft,d,l.scrollTop,h),l.dataset.sliding=!0,s(l),l.classList.contains("n-carousel__auto")){if(l.dataset.sliding=!0,t(l)){let e=Math.round(l.scrollTop/(l.offsetHeight-i(l)));l.children[e].style.height="auto";var a=l.children[e].scrollHeight;l.children[e].style.height="";var c=e*a-l.scrollTop}else{let e=Math.round(l.scrollLeft/(l.offsetWidth-r(l)));l.children[e].style.height="auto",l.children[e].style.position="absolute";a=l.children[e].scrollHeight;l.children[e].style.position=l.children[e].style.height="",l.scrollTo(d,h);c=0}o(l,0,c,a).then(e=>{n(l),setTimeout(()=>{delete l.dataset.sliding},66)})}else n(l),setTimeout(()=>{delete l.dataset.sliding},66)},66))},f=(e,l,i,a)=>{if(clearTimeout(e.nCarouselTimeout),s(e),!e.dataset.sliding){e.removeEventListener("scroll",u),e.dataset.sliding=!0;let s=e.children[e.dataset.y].clientHeight,i=s;if(e.classList.contains("n-carousel__auto")){let l=e.scrollLeft,s=e.scrollTop;t(e)?e.children[a].style.height="auto":(e.children[a].style.position="absolute",e.children[a].style.width=`${e.offsetWidth-r(e)}px`),i=e.children[a].scrollHeight,e.children[a].style.position=e.children[a].style.width=e.children[a].style.height="",e.scrollTo(l+r(e)/2,s),e.scrollTo(l,s)}let c=-1*(e.dataset.y*s-a*i);o(e,l,c,i!==s&&i).then(t=>{n(e)})}},g=e=>{let l=1*(t(e)?e.dataset.y:e.dataset.x);m(e,l>=e.children.length-1?0:l+1)},y=e=>{let l=1*(t(e)?e.dataset.y:e.dataset.x);m(e,0===l?e.children.length-1:l-1)},m=(e,l)=>{t(e)?f(e,0,(e.offsetHeight,i(e),e.scrollTop),l):f(e,(e.offsetWidth-r(e))*l-e.scrollLeft,0,l)},p=e=>{let t=e.target;if(t.classList.contains("n-carousel--content")&&["ArrowLeft","ArrowRight","Home","End"].includes(e.key))switch(e.preventDefault(),e.key){case"ArrowLeft":y(t);break;case"ArrowRight":g(t);break;case"ArrowUp":y(t);break;case"ArrowDown":g(t);break;case"Home":m(t,0);break;case"End":m(t,t.children.length-1)}},T=e=>e.closest(".n-carousel").querySelector(".n-carousel--content"),w=e=>y(T(e.target)),L=e=>g(T(e.target)),v=e=>{let t=e.target;"BUTTON"===t.tagName&&m(T(t),[...t.parentNode.children].indexOf(t))};document.querySelectorAll(".n-carousel:not([data-ready])").forEach(e=>{a(e,".n-carousel--previous button").onclick=w,a(e,".n-carousel--next button").onclick=L,a(e,".n-carousel--index").onclick=v,e.querySelector(".n-carousel--content").onkeydown=p;let t=e.querySelector(":scope > .n-carousel--content");if(t.tabIndex=0,n(t),window.requestAnimationFrame(()=>{e.dataset.ready=!0,l(t)}),t.classList.contains("n-carousel--auto-slide")){let e=()=>{g(t),t.nCarouselTimeout=setTimeout(e,2e3)};t.nCarouselTimeout=setTimeout(e,2e3),t.addEventListener("pointerenter",e=>clearTimeout(e.target.nCarouselTimeout))}})